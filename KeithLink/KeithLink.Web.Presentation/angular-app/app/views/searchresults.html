<div page-header-bar>
	<div header-message>
		Product Catalog
	</div>
	<div header-buttons>
		<button class="btn btn-icon"><span class="icon-printer"></span></button>
		<button class="btn btn-icon"><span class="icon-disk"></span></button>
	</div>
</div>
<div class="row page-subheader-bar">
	<div class="col-md-12 page-subheader-bar__container">
		<div class="page-subheader-bar__message hidden-xs hidden-sm">
			<div ng-repeat="bc in breadcrumbs"><a ng-click="breadcrumbClickEvent(bc.type,bc.id)">{{bc.name}} </a> <span>>></span></div>
		</div>
		<div class="page-subheader-bar__message hidden-lg hidden-md">
			{{categoryName}}{{searchTerm}}
		</div>
		<div ng-click="hidden = ! hidden" class="hidden-lg hidden-md page-subheader-bar__filter">
			Filter <span ng-show="filterCount>0">({{filterCount}})</span><span class="icon-arrow-down5"></span>
		</div>
	</div>
</div>
<div class="row" ng-hide="hidden">
	<div class="col-xs-9 col-xs-offset-3 mobile-filter filters">
		<div class="row">
			<accordion close-others="oneAtATime">
				<!-- 				<accordion-group is-open="status.open">
					<accordion-heading>
						Categories<i class="pull-right glyphicon" ng-class="{'icon-arrow-up6': status.open, 'icon-arrow-down7': !status.open}"></i>
					</accordion-heading>
					<accordion close-others="false">
						<accordion-group is-open="status.subopen[$index]" ng-repeat="category in categories | orderBy : ['name']" class="sub-accordion">
							<accordion-heading>
												<div class="panel panel-default">
																						<div class="panel-body">
																																<a ng-click="toggleSelection(category, 'category')" ng-class="{active: category.name == selectedCategory}">{{category.name}}</a>
																						</div>
												</div>
							</accordion-heading>
							<div ng-repeat="subcategory in category.subcategories" class="panel panel-default" style="height: auto;">
												<div class="panel-body">
																						<li ng-click="toggleSelection(subcategory, 'subcategory')">
																																<span ng-class="{active: subcategory.name == selectedSubcategory}">{{subcategory.name}}</span>
																						</li>
												</div>
							</div>
						</accordion-group>
					</accordion>
				</accordion-group> -->
				<accordion-group is-open="status.openCategories">
					<accordion-heading>
						Categories<i class="pull-right glyphicon" ng-class="{'icon-arrow-up6': status.openCategories, 'icon-arrow-down7': !status.openCategories}"></i>
					</accordion-heading>
					<div ng-repeat="category in categories" class="panel panel-default">
						<div class="panel-body">
							<a ng-click="toggleSelection(category, 'category')" ng-class="{active: category.name == selectedCategory.name}">{{category.categoryname}} ({{category.count}})</a>
						</div>
					</div>
				</accordion-group>
				<accordion-group is-open="status.openBrand">
					<accordion-heading>
						Brand<i class="pull-right glyphicon" ng-class="{'icon-arrow-up6': status.openBrand, 'icon-arrow-down7': !status.openBrand}"></i>
					</accordion-heading>
					<div ng-repeat="brand in brands" class="panel panel-default">
						<div class="panel-body">
							<input type="checkbox"
							value="brandValue_{{brand.name}}"
							id="brandId_{{brand.name}}"
							ng-checked="selectedBrands.indexOf(brand.name) > -1"
							ng-click="toggleSelection(brand.name,'brand')">
							<label for="brandId_{{brand.name}}">{{brand.name}} ({{brand.count}})</label>
						</div>
					</div>
				</accordion-group>
				<accordion-group is-open="status.openDietary">
					<accordion-heading>
						Dietary<i class="pull-right glyphicon" ng-class="{'icon-arrow-up6': status.openDietary, 'icon-arrow-down7': !status.openDietary}"></i>
					</accordion-heading>
					<div ng-repeat="diet in dietary" class="panel panel-default">
						<div class="panel-body">
							<input type="checkbox"
							value="dietValue_{{diet.name}}"
							id="dietId_{{diet.name}}"
							ng-checked="selectedDietary.indexOf(diet.name) > -1"
							ng-click="toggleSelection(diet.name,'dietary')">
							<label for="dietId_{{diet.name}}">{{diet.name}} ({{diet.count}})</label>
						</div>
					</div>
				</accordion-group>
				<accordion-group is-open="status.openSpecs">
					<accordion-heading>
						Item Specifications<i class="pull-right glyphicon" ng-class="{'icon-arrow-up6': status.openSpecs, 'icon-arrow-down7': !status.openSpecs}"></i>
					</accordion-heading>
					<div ng-class="{hidenonstock: !hasNonstock}" class="panel panel-default">
						<div class="panel-body">
							<input type="checkbox"
							value="nonstockValue_{{nonstock.name}}"
							id="nonstockId_{{nonstock.name}}"
							ng-checked="selectedNonstock.indexOf(nonstock.name) > -1"
							ng-click="toggleSelection(nonstock.name,'nonstock')">
							<label for="nonstockId_{{nonstock.name}}"><span class="{{nonstock.iconclass}}"></span> {{nonstock.displayname}} ({{nonstock.count}})</label>
						</div>
					</div>
					<div ng-repeat="spec in itemspecs" class="panel panel-default">
						<div class="panel-body">
							<input type="checkbox"
							value="specValue_{{spec.name}}"
							id="specId_{{spec.name}}"
							ng-checked="selectedSpecs.indexOf(spec.name) > -1"
							ng-click="toggleSelection(spec.name,'spec')">
							<label for="specId_{{spec.name}}"><span class="{{spec.iconclass}}"></span> {{spec.displayname}} ({{spec.count}})</label>
						</div>
					</div>
				</accordion-group>
			</accordion>
		</div>
	</div>
</div>
<div class="row">
	<!-- Filters -->
	<div class="col-sm-3 hidden-xs hidden-sm search-results__filters">
		<div class="row">
			<div class="col-sm-12">
				<h3 ng-show="paramType !== 'category'">Categories</h3>
				<h3 ng-show="paramType === 'category'">{{categoryName}}</h3>
				<ul class="nav search-results__category">
					<li ng-repeat="category in categories">
						<a ng-click="toggleSelection(category, 'category')" ng-class="{active: category.name == selectedCategory.name}">{{category.categoryname}} ({{category.count}})</a>
						<!-- <ul ng-show="category.show" class="">
																<li ng-repeat="subcategory in category.subcategories" ng-click="toggleSelection(subcategory, 'subcategory')">
																										<span ng-class="{active: subcategory.name == selectedSubcategory}">{{subcategory.name}}</span>
																</li>
						</ul> -->
					</li>
				</ul>
			</div>
		</div>
		<div class="row sub-content">
			<div class="col-sm-12">
				<h3>Brand</h3>
				<div ng-repeat="brand in brands" ng-class="{hidebrand: $index > brandHiddenNumber}">
					<input type="checkbox"
					value="brandValue_{{brand.name}}"
					id="brandId_{{brand.name}}"
					ng-checked="selectedBrands.indexOf(brand.name) > -1"
					ng-click="toggleSelection(brand.name,'brand')">
					<label for="brandId_{{brand.name}}">{{brand.name}} ({{brand.count}})</label>
				</div>
				<div ng-class="{'hidebrand': brandCount <= constantHiddenNumber}">
					<a ng-class="{'hidebrand': isBrandShowing}" ng-click="showBrand()">+ Show More</a>
					<a ng-class="{'hidebrand': !isBrandShowing}" ng-click="hideBrand()">- Show Less</a>
				</div>
			</div>
		</div>
		<div class="row sub-content">
			<div class="col-sm-12">
				<h3>Dietary</h3>
				<div ng-repeat="diet in dietary" ng-class="{hidedietary: $index > dietaryHiddenNumber}">
					<input type="checkbox"
					value="dietValue_{{diet.name}}"
					id="dietId_{{diet.name}}"
					ng-checked="selectedDietary.indexOf(diet.name) > -1"
					ng-click="toggleSelection(diet.name,'dietary')">
					<label for="dietId_{{diet.name}}">{{diet.name}} ({{diet.count}})</label>
				</div>
				<div ng-class="{'hidedietary': dietaryCount <= constantHiddenNumber}">
					<a ng-class="{'hidedietary': isDietaryShowing}" ng-click="showDietary()">+ Show More</a>
					<a ng-class="{'hidedietary': !isDietaryShowing}" ng-click="hideDietary()">- Show Less</a>
				</div>
			</div>
		</div>
		<div class="row sub-content">
			<div class="col-sm-12">
				<h3>Item Specifications</h3>
				<div ng-class="{hidenonstock: !hasNonstock}">
					<input type="checkbox"
					value="nonstockValue_{{nonstock.name}}"
					id="nonstockId_{{nonstock.name}}"
					ng-checked="selectedNonstock.indexOf(nonstock.name) > -1"
					ng-click="toggleSelection(nonstock.name,'nonstock')">
					<label for="nonstockId_{{nonstock.name}}"><span class="{{nonstock.iconclass}}"></span> {{nonstock.displayname}} ({{nonstock.count}})</label>
				</div>
				<div ng-repeat="spec in itemspecs" ng-class="{hidespec: $index > specHiddenNumber}">
					<input type="checkbox"
					value="specValue_{{spec.name}}"
					id="specId_{{spec.name}}"
					ng-checked="selectedSpecs.indexOf(spec.name) > -1"
					ng-click="toggleSelection(spec.name,'spec')">
					<label for="specId_{{spec.name}}"><span class="{{spec.iconclass}}"></span> {{spec.displayname}} ({{spec.count}})</label>
				</div>
				<div ng-class="{'hidespec': specCount <= constantHiddenNumber}">
					<a ng-class="{'hidespec': isSpecShowing}" ng-click="showSpec()">+ Show More</a>
					<a ng-class="{'hidespec': !isSpecShowing}" ng-click="hideSpec()">- Show Less</a>
				</div>
			</div>
		</div>
	</div>
	<!-- Search Results -->
	<div class="col-md-9 col-xs-12">
		<div class="row">
			<h2 class="col-md-6 hidden-xs hidden-sm">Search Results <span class="smallspinner" loading-spinner="loadingResults"></span></h2>
			<span class="col-md-6 pull-right hidden-xs hidden-sm" style="width: inherit;">{{totalItems}} results</span>
		</div>
		
		<div>
			<table class="table table-striped" infinite-scroll="infiniteScrollLoadMore()" infinite-scroll-distance="1">
				<thead>
					<tr>
						<th style="width:10px;"></th>
						<th class="hand" ng-click="sortTable('itemnumber')">
							Item
							<span sort-icons field="'itemnumber'" sortorder="asc" sortby="sortField"></span>
						</th>
						<th class="hand hidden-sm hidden-xs" ng-click="sortTable('brand')">
							Brand
							<span sort-icons field="'brand'" sortorder="asc" sortby="sortField"></span>
						</th>
						<th class="hand" ng-click="sortTable('name')">
							Name
							<span sort-icons field="'name'" sortorder="asc" sortby="sortField"></span>
						</th>
						<th class="hidden-sm hidden-xs">
							Pack/Size
						</th>
						<th class="hidden-sm hidden-xs"></th>
						<th class="hand hidden-sm hidden-xs" ng-click="sortTable('caseprice')">
							Price
							<span sort-icons field="'caseprice'" sortorder="asc" sortby="sortField"></span>
						</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat-start="item in products" ng-class="{ odd : $odd, even: $even }" class="table-striped__desktop-details">
						<td class="text-light table-icon" style="width:10px;">
							<span favorite-item-click-handlers><span favorite-icons></span></span>
						</td>
						<td>
							<a ui-sref="menu.catalog.products.details({ itemNumber : item.itemnumber })">{{item.itemnumber}}</a>
						</td>
						<td class="hidden-sm hidden-xs">
							{{item.brand}}
						</td>
						<td>
							{{item.name}}
						</td>
						<td class="hidden-sm hidden-xs">
							{{item.cases}} / {{item.size}}
						</td>
						<td class="hidden-sm hidden-xs icons" item-icons>
						</td>
						<td class="hidden-sm hidden-xs">
							{{item.caseprice}}
						</td>
						<td class="table-icon table-actions">
							<a class="icon-plus2" ng-mouseleave="displayedItems.isContextMenuDisplayed=false" ng-mouseenter="displayedItems.isContextMenuDisplayed = true"><div context-menu class="context-menu__in-list"></div></a>
							<a ng-click="showDetails = !showDetails;"><span class="text-light visible-xs-inline visible-sm-inline icon-ellipsis"></span></a>
						</td>
					</tr>
					<tr ng-repeat-end ng-show="showDetails" class="table-striped__mobile-details hidden-md hidden-lg" ng-class="{ odd : $odd, even: $even }">
						<td colspan=4>
							<div>
								<p>Pack / Size: {{item.cases}} / {{item.size}}</p>
								<p>Brand: {{item.brand}}</p>
								<p item-icons>
								<p>Price: {{item.caseprice}}</p>
								</p>
							</div>
						</td>
					</tr>
					<tr ng-show="products.length === 0">
						<td colspan="7">No products found.</td>
					</tr>
				</tbody>
			</table>
			<div class="text-center sub-content" loading-spinner="loadingResults"></div>
		</div>
	</div>
</div>