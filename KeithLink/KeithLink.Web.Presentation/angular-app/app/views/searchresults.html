<div page-header-bar>
  <div header-message>
    {{pageTitle}}

    <div class="hand-pointer hidden-md hidden-lg pull-right hidden-print" style="color: #A1A1A1;">
      <span ng-click="toggleListView('ViewWithoutImages');" ng-class="{ 'ico-blue' : defaultSearchView == 'ViewWithoutImages' }" class="icon-list extra-large-icon"></span>
      <span ng-click="toggleListView('ViewWithImages');" ng-class="{ 'ico-blue' : defaultSearchView == 'ViewWithImages' }" class="icon-layout extra-large-icon"></span>
    </div>
  </div>

  <div class="pull-right">
    <a class="btn btn-icon btn-default" title="Print" ng-click="print()"><span class="icon-printer"></span></a>
    <a class="btn btn-icon btn-default" title="Export" ng-click="openExportModal()"><span class="icon-export"></span></a>
  </div>
</div>

<!-- Desktop subheader bar -->
<div class="row page-subheader-bar hidden-xs hidden-sm hidden-print">
  <div class="col-md-12 page-subheader-bar__container">
    <div class="page-subheader-bar__message col-md-8">
      <div ng-repeat="bc in breadcrumbs">
        <a ng-click="selectBreadcrumb(bc.apiText)">{{bc.displayText}} </a> <span>>></span>
      </div>
    </div>
    <div ng-show="products.length !== 0" class="pull-right input-group padding-right-15">
      <div class="search-result-sort-buttons">
        <span class="margin-right-5">Sort: </span>
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{selectedSortParameter}}<span class="caret margin-left-5"></span></button>
            <ul class="dropdown-menu">
              <li ng-repeat="sortParameter in sortParameters" >
                <a ng-click="selectSortParameter(sortParameter.name, sortParameter.value)">{{sortParameter.name}}</a>
              </li>
            </ul>
        </div>
      </div>
      <div class="hand-pointer pull-right hidden-print">
        <span ng-click="toggleListView('ViewWithoutImages');" ng-class="{ 'ico-blue' : defaultSearchView == 'ViewWithoutImages' }" class="icon-list extra-large-icon"></span>
        <span ng-click="toggleListView('ViewWithImages');" ng-class="{ 'ico-blue' : defaultSearchView == 'ViewWithImages' }" class="icon-layout extra-large-icon"></span>
      </div>
    </div>
  </div>
</div>

<!-- Mobile subheader bar -->
<div class="row page-subheader-bar hidden-md hidden-lg">
  <div class="col-md-12 page-subheader-bar__container">
    <div class="col-md-6 col-sm-6 page-subheader-bar__searchmessage">
      {{featuredBreadcrumb.displayText}}
    </div>
    <button type="button" ng-click="hideMobileFilters = !hideMobileFilters" class="col-md-3 col-sm-3 hidden-print btn-no-style page-subheader-bar__searchbutton button-right max-width-100">
      Filter <span ng-show="filterCount > 0">({{filterCount}})</span><span class="icon-arrow-down5"></span>
    </button>
    <button type="button" ng-disabled="!filterCount" ng-click="clearFacets()" class="col-sm-3 hidden-print btn-no-style page-subheader-bar__searchbutton button-right max-width-100">
      Clear Filters
    </button>
  </div>
</div>

<!-- Mobile Filters -->

<div class="row" ng-hide="hideMobileFilters">
  <div class="col-xs-9 col-xs-offset-3 mobile-filter filters">
    <div class="row">

      <accordion close-others="true">
        <accordion-group is-open="status.openCategories">
          <accordion-heading>
            <span >Categories</span><i class="pull-right" ng-class="{'icon-arrow-up6': status.openCategories, 'icon-arrow-down7': !status.openCategories}"></i>
          </accordion-heading>
          <accordion close-others="true">
            <accordion-group ng-repeat="parentcategory in parentcategories.available | orderBy : 'code'" is-open="parentcategory.isOpen" class="mobile-accordion">
              <accordion-heading>
                <div>
                  <div class="pull-left">
                    <input
                    type="checkbox"
                    class="margin-right-10"
                    value="categoryValue_{{parentcategory.name}}"
                    id="categoryId_{{parentcategory.name}}"
                    ng-if="$state.params.catalogType != 'UNFI'"
                    ng-checked="  parentcategories.selected.indexOf(parentcategory.name) > -1 || parentcategory.name === featuredBreadcrumb.displayText"
                    ng-disabled="parentcategory.name === featuredBreadcrumb.displayText"
                    ng-click="toggleSelection(true, parentcategories.selected, parentcategory.name, '', $index); $event.stopPropagation();">
                    <label
                      ng-class="{active: parentcategories.selected.indexOf(parentcategory.name) > -1 || parentcategory.name === featuredBreadcrumb.displayText}">
                      {{::parentcategory.name}}
                      <span ng-show="parentcategory.count > 0">({{parentcategory.count}})</span>
                    </label>
                  </div>
                  <span style="margin-bottom:5px !important;" ng-class="{'icon-minus3' : parentcategory.isOpen && $state.params.catalogType != 'UNFI', 'icon-plus3' : !parentcategory.isOpen && $state.params.catalogType != 'UNFI'}" ng-click="toggleSubCategories(parentcategory, $index)" class="subCategoryToggle pull-right"></span>
                </div>
              </accordion-heading>
              <div class="panel-body max-width-100Percent" ng-repeat="category in parentcategory.categories">
                <div>
                  <input
                  type="checkbox"
                  value="categoryValue_{{category.categoryname}}"
                  id="categoryId_{{category.categoryname}}"
                  ng-checked="  subcategories.selected.indexOf(category.name) > -1 || category.name === featuredBreadcrumb.displayText || category.isSelected"
                  ng-disabled="category.categoryname === featuredBreadcrumb.displayText"
                  ng-click="toggleSelection(false,  subcategories.selected, category.name, parentcategory.name)">
                  <label for="categoryId_{{category.categoryname}}">{{::category.categoryname}} <span ng-show="category.count > 0">({{category.count}})</span></label>
                </div>
              </div>
            </accordion-group>
          </accordion>
        </accordion-group>

        <accordion-group is-open="status.openBrand" ng-show=" brands.available.length > 0" class="mobile-accordion">
          <accordion-heading>
          Brands<i class="pull-right" ng-class="{'icon-arrow-up6': status.openBrand, 'icon-arrow-down7': !status.openBrand}"></i>
          </accordion-heading>
          <div ng-repeat="brand in  brands.available | orderBy: 'name'" class="panel panel-default">
            <div class="panel-body">
              <input type="checkbox"
              value="brandValue_{{brand.name}}"
              id="brandId_{{brand.name}}"
              ng-checked=" brands.selected.indexOf(brand.name) > -1 || brand.name === featuredBreadcrumb.displayText"
              ng-disabled="brand.name === featuredBreadcrumb.displayText"
              ng-click="toggleSelection(false,  brands.selected, brand.name)">
              <label for="brandId_{{brand.name}}">{{::brand.name}} <span ng-show="brand.count > 0">({{brand.count}})</span></label>
            </div>
          </div>
        </accordion-group>

        <accordion-group is-open="status.openManufacturer" ng-show=" mfrname.available.length > 0" class="mobile-accordion">
          <accordion-heading>
          Manufacturers<i class="pull-right" ng-class="{'icon-arrow-up6': status.openManufacturer, 'icon-arrow-down7': !status.openManufacturer}"></i>
          </accordion-heading>
          <div ng-repeat="manufacturer in  mfrname.available" class="panel panel-default">
            <div class="panel-body">
              <input type="checkbox"
              value="manufacturerValue_{{manufacturer.name}}"
              id="manufacturerId_{{manufacturer.name}}"
              ng-checked=" manufacturers.selected.indexOf(brand.name) > -1 || manufacturer.name === featuredBreadcrumb.displayText"
              ng-disabled="manufacturer.name === featuredBreadcrumb.displayText"
              ng-click="toggleSelection(false,  manufacturers.selected, manufacturer.name)">
              <label for="manufacturerId_{{manufacturer.name}}">{{::manufacturer.name}} <span ng-show="manufacturer.count > 0">({{manufacturer.count}})</label>
            </div>
          </div>
        </accordion-group>

        <accordion-group is-open="status.openDietary" ng-show=" dietary.available.length > 0" class="mobile-accordion">
          <accordion-heading>
          Dietary<i class="pull-right" ng-class="{'icon-arrow-up6': status.openDietary, 'icon-arrow-down7': !status.openDietary}"></i>
          </accordion-heading>
          <div ng-repeat="diet in  dietary.available" class="panel panel-default">
            <div class="panel-body">
              <input type="checkbox"
              value="dietValue_{{diet.name}}"
              id="dietId_{{diet.name}}"
              ng-checked=" dietary.selected.indexOf(diet.name) > -1"
              ng-click="toggleSelection(false,  dietary.selected, diet.name)">
              <label for="dietId_{{diet.name}}">{{::diet.name}} <span ng-show="diet.count > 0">({{diet.count}})</label>
            </div>
          </div>
        </accordion-group>

        <accordion-group is-open="status.temp_zone" ng-show=" temp_zones.available.length > 0" class="mobile-accordion">
          <accordion-heading>
          Temp Zone<i class="pull-right" ng-class="{'icon-arrow-up6': status.temp_zone, 'icon-arrow-down7': !status.temp_zone}"></i>
          </accordion-heading>
          <div ng-repeat="temp_zone in  temp_zones.available" class="panel panel-default">
            <div class="panel-body">
              <input type="checkbox"
              value="specValue_{{temp_zone.name}}"
              id="specId_{{temp_zone.name}}"
              ng-checked=" temp_zones.selected.indexOf(temp_zone.name) > -1"
              ng-click="toggleSelection(false,  temp_zones.selected, temp_zone.name)">
              <label for="specId_{{temp_zones.name}}"><span class="{{temp_zone.iconclass}}"></span>{{temp_zone.description}} <span ng-show="temp_zone.count > 0">({{temp_zone.count}})</label>
            </div>
          </div>
        </accordion-group>

        <accordion-group is-open="status.openSpecs" ng-show=" itemspecs.available.length > 0" class="mobile-accordion">
          <accordion-heading>
          Item Specifications<i class="pull-right" ng-class="{'icon-arrow-up6': status.openSpecs, 'icon-arrow-down7': !status.openSpecs}"></i>
          </accordion-heading>
          <div ng-repeat="spec in  itemspecs.available" class="panel panel-default">
            <div class="panel-body">
              <input type="checkbox"
              value="specValue_{{spec.name}}"
              id="specId_{{spec.name}}"
              ng-checked=" itemspecs.selected.indexOf(spec.name) > -1"
              ng-click="toggleSelection(false,  itemspecs.selected, spec.name)">
              <label for="specId_{{spec.name}}"><span class="{{spec.iconclass}}"></span>{{::spec.displayname}} <span ng-show="spec.count > 0">({{spec.count}})</label>
            </div>
          </div>
        </accordion-group>

        <accordion-group is-open="status.openSpecial" ng-show=" specialfilters.available.length > 0" class="mobile-accordion">
          <accordion-heading>
          Special Filters<i class="pull-right" ng-class="{'icon-arrow-up6': status.openSpecs, 'icon-arrow-down7': !status.openSpecs}"></i>
          </accordion-heading>
          <div ng-repeat="specialFilter in  specialfilters.available" class="panel panel-default">
            <div class="panel-body">
              <input type="checkbox"
              value="specialFilterValue_{{specialFilter.name}}"
              id="specialFilterId_{{specialFilter.name}}"
              ng-checked=" specialfilters.selected.indexOf(specialFilter.name) > -1"
              ng-click="toggleSelection(false,  specialfilters.selected, specialFilter.name)">
              <label for="specialFilterId_{{specialFilter.name}}">{{::specialFilter.displayname}} <span ng-show="specialFilter.count > 0">({{specialFilter.count}})</label>
            </div>
          </div>
        </accordion-group>

        <accordion-group is-open="status.openCatalogs" ng-show="(bekItemCount + unfiItemCount - totalcount) > 0 && selectedUserContext.customer.canViewUNFI" class="mobile-accordion">
          <accordion-heading>Catalogs<i class="pull-right" ng-class="{'icon-arrow-up6': status.openCatalogs, 'icon-arrow-down7': !status.openCatalogs}"></i></accordion-heading>
            <div class="panel panel-default">
              <div class="panel-body">
                  <a ng-click="bekCatalogSwitch()" ng-show="$state.params.catalogType != 'BEK' && bekItemCount > 0">Main ({{bekItemCount}})</a>
                  <a ng-click="unfiCatalogSwitch()" ng-show="$state.params.catalogType != 'UNFI' && unfiItemCount > 0 && selectedUserContext.customer.canViewUNFI">Natural and Organic ({{unfiItemCount}})</a>
              </div>
            </div>
        </accordion-group>
      </accordion>

    </div>
  </div>
</div>

<!-- Filters -->

<div class="row top-offset">

  <div class="col-sm-3 hidden-xs hidden-sm search-results__filters">
    <div class="row" ng-show="parentcategories.available.length > 0">
      <div class="col-sm-12" id="categoriesSection">
        <h3>Categories<span ng-show="filterCount > 0" style="font-size:.65em;"><a class="pull-right" ng-click="clearFacets()">Clear Filters</a></span></h3>
          <ul class="nav search-results__category"  >
            <li class="margin-left-10" ng-repeat="parentcategory in parentcategories.available | orderBy : 'code'">
            <div>
              <input
                type="checkbox"
                class="margin-right-5"
                ng-if="parentcategories.available.length > 1"
                value="categoryValue_{{parentcategory.name}}"
                id="categoryId_{{parentcategory.name}}"
                ng-disabled="tutorialRunning"
                ng-checked="  parentcategories.selected.indexOf(parentcategory.name) > -1 || parentcategory.name === featuredBreadcrumb.displayText"
                ng-click="toggleSelection(true, parentcategories.selected, parentcategory.name, '', $index); $event.stopPropagation();">
              <label
                ng-class="{active:   parentcategories.selected.indexOf(parentcategory.name) > -1}">
                <span class="category-description-md">
                  {{::parentcategory.name}}
                </span>
                <span ng-show="parentcategory.count > 0">({{parentcategory.count}})</span>
              </label>
              <a ng-class="{'icon-minus3' : parentcategory.IsOpen && $state.params.catalogType != 'UNFI', 'icon-plus3' : !parentcategory.IsOpen && $state.params.catalogType != 'UNFI'}" class="subCategoryToggle large-icon inline-icon" ng-click="toggleSubCategories(parentcategory, $index)"></a>
            </div>
            <ul class="subcategories_{{$index}} subcategory-description-md" style="display:none;">
              <li ng-repeat="category in parentcategory.categories">
                <div>
                  <input
                    type="checkbox"
                    ng-disabled="tutorialRunning"
                    ng-click="toggleSelection(false, subcategories.selected, category.name, parentcategory.name)"
                    ng-checked="  subcategories.selected.indexOf(category.name) > -1 || category.name === featuredBreadcrumb.displayText || category.isSelected"
                    class="input-margin-5px">
                  <label
                    ng-if="!tutorialRunning"
                    ng-click="toggleSelection(false, subcategories.selected, category.name, parentcategory.name)"
                    ng-class="{active:  subcategories.selected.indexOf(category.name) > -1}">
                    <span class="category-description-md">
                      {{::category.name}}
                    </span>
                    <span ng-show="category.count > 0">({{category.count}})</span>
                  </label>
                  <label
                    ng-if="tutorialRunning"
                    ng-class="{active:  subcategories.selected.indexOf(category.name) > -1}">
                    <span class="category-description-md">
                      {{::category.name}}
                    </span>
                    <span ng-show="category.count > 0">({{category.count}})</span>
                  </label>
                </div>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

    <div>
      <div class="row" ng-show=" brands.available.length > 0">
        <div class="col-sm-12">
          <h3>Brands</h3>
          <ul class="nav search-results__facets">
            <li ng-repeat="brand in  brands.available | orderBy: 'name'">
              <input
                type="checkbox"
                value="brandValue_{{brand.name}}"
                id="brandId_{{brand.name}}"
                ng-checked=" brands.selected.indexOf(brand.name) > -1 || brand.name === featuredBreadcrumb.displayText"
                ng-disabled="brand.name === featuredBreadcrumb.displayText"
                ng-click="toggleSelection(false,  brands.selected, brand.name)"
                class="input-margin-5px">
              <label for="brandId_{{brand.name}}">{{::brand.name}} <span ng-show="brand.count > 0">({{brand.count}})</span></label>
            </li>
          </ul>
        </div>
      </div>

      <div class="row" ng-show=" manufacturers.available.length > 0">
        <div class="col-sm-12">
          <h3>Manufacturers</h3>
            <ul class="nav search-results__facets">
              <li class="facet-checkbox" ng-repeat="manufacturer in  manufacturers.available">
                <input
                  type="checkbox"
                  value="manufacturerValue_{{manufacturer.name}}"
                  id="manufacturerId_{{manufacturer.name}}"
                  ng-checked=" manufacturers.selected.indexOf(manufacturer.name) > -1 || manufacturer.name === featuredBreadcrumb.displayText"
                  ng-disabled="manufacturer.name === featuredBreadcrumb.displayText"
                  ng-click="toggleSelection(false,  manufacturers.selected, manufacturer.name)"
                  class="input-margin-5px">
                <label for="manufacturerId_{{manufacturer.name}}">{{::manufacturer.name}} <span ng-show="manufacturer.count > 0">({{manufacturer.count}})</span></label>
              </li>
            </ul>
        </div>
      </div>

      <div class="row" ng-show=" dietary.available.length > 0">
        <div class="col-sm-12">
          <h3>Dietary</h3>
            <ul class="nav search-results__facets">
              <li class="facet-checkbox" ng-repeat="diet in  dietary.available">
                <input
                  type="checkbox"
                  value="dietValue_{{diet.name}}"
                  id="dietId_{{diet.name}}"
                  ng-checked=" dietary.selected.indexOf(diet.name) > -1"
                  ng-click="toggleSelection(false,  dietary.selected, diet.name)"
                  class="input-margin-5px">
                <label class="text-capitalize" for="dietId_{{diet.name}}">{{::diet.name}} <span ng-show="diet.count > 0">({{diet.count}})</span></label>
              </li>
            </ul>
        </div>
      </div>

      <div class="row" ng-show=" temp_zones.available.length > 0">
        <div class="col-sm-12">
          <h3>Temp Zone</h3>
            <ul class="nav search-results__facets">
              <li class="facet-checkbox" ng-repeat="temp_zone in  temp_zones.available">
                <input
                  type="checkbox"
                  value="temp_zoneValue_{{temp_zone.name}}"
                  id="temp_zoneId_{{temp_zone.name}}"
                  ng-checked="temp_zones.selected.indexOf(temp_zone.name) > -1"
                  ng-click="toggleSelection(false, temp_zones.selected, temp_zone.name)"
                  class="input-margin-5px">
                <label class="text-capitalize" for="temp_zoneId_{{temp_zone.name}}">{{::temp_zone.description}} <span ng-show="temp_zone.count > 0">({{temp_zone.count}})</span></label>
              </li>
            </ul>
        </div>
      </div>

      <div class="row" ng-show=" itemspecs.available.length > 0">
        <div class="col-sm-12">
          <h3>Item Specifications</h3>
            <ul class="nav search-results__facets">
              <li ng-repeat="spec in  itemspecs.available">
                <input
                  type="checkbox"
                  value="specValue_{{spec.name}}"
                  id="specId_{{spec.name}}"
                  ng-checked=" itemspecs.selected.indexOf(spec.name) > -1"
                  ng-click="toggleSelection(false,  itemspecs.selected, spec.name)"
                  class="input-margin-5px">
                <label for="specId_{{spec.name}}"><span class="{{spec.iconclass}}"></span>{{::spec.displayname}} <span ng-show="spec.count > 0">({{spec.count}})</span></label>
              </li>
            </ul>
        </div>
      </div>

      <div class="row" ng-show=" specialfilters.available.length > 0">
        <div class="col-sm-12">
          <h3>Special Filters</h3>
            <ul class="nav search-results__facets">
              <li ng-repeat="specialFilter in  specialfilters.available">
                <input
                  type="checkbox"
                  value="specialFilterValue_{{specialFilter.name}}"
                  id="specialFilterId_{{specialFilter.name}}"
                  ng-checked=" specialfilters.selected.indexOf(spec.name) > -1"
                  ng-click="toggleSelection(false,  specialfilters.selected, specialFilter.name)"
                  class="input-margin-5px">
                <label>{{::specialFilter.desc}} <span>({{specialFilter.count}})</span></label>
              </li>
            </ul>
        </div>
      </div>

      <div class="row" ng-show="(bekItemCount + unfiItemCount - totalcount) > 0 && selectedUserContext.customer.canViewUNFI">
        <div class="col-sm-12">
          <h3>Catalogs</h3>
            <a ng-click="bekCatalogSwitch()" ng-show="$state.params.catalogType != 'BEK' && bekItemCount > 0">Main ({{bekItemCount}})</a>
            <a ng-click="unfiCatalogSwitch()" ng-show="$state.params.catalogType != 'UNFI' && unfiItemCount > 0 && selectedUserContext.customer.canViewUNFI">Natural and Organic ({{unfiItemCount}})</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Search Results View with Images -->
  <div ng-if="defaultSearchView == 'ViewWithImages'" class="col-xs-12 col-sm-12 col-md-9 col-lg-8">
    <div>
      <pagination
        ng-show="totalProducts > itemsPerPage"
        total-items="totalProducts"
        ng-model="currentPage"
        items-per-page="itemsPerPage"
        max-size="10"
        boundary-links="true"
        rotate="false"
        ng-click="blockUIAndChangePage(this);"
        class="pagination search-results-pagination">
      </pagination>
    </div>
    <div class="row" ng-show="products.length !== 0">
      <div class="col-sm-12 col-xs-12">
        <div class="pull-left input-group hidden-md hidden-lg padding-right-15">
          <div class="search-result-sort-buttons">
            <span class="margin-right-5">Sort: </span>
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{selectedSortParameter}}<span class="caret margin-left-5"></span></button>
                <ul class="dropdown-menu">
                  <li ng-repeat="sortParameter in sortParameters" >
                    <a ng-click="selectSortParameter(sortParameter.name, sortParameter.value)">{{sortParameter.name}}</a>
                  </li>
                </ul>
            </div>
          </div>
        </div>
        <h2 class="pull-left hidden-sm hidden-xs" >Search Results</h2>
        <span class="pull-right margin-top-25">{{rangeStart - rangeStartOffset}} - {{rangeEnd}} of {{totalProducts}} Items</span>
      </div>
    </div>
    <div context-menu favorite-item-click-handlers >
      <div>
        <ul fast-repeat="item in products" class="searchResults">
          <li class="block-display" style="list-style:none;">
            <div style="padding: 15px 0 20px 0" >
              <div class="inline-block-display" style="width:100%;">
                <div class="pull-left-xs inline-block-display search-result-description">
                  <div>
                    <div>
                      <div class="block-display">
                        <a style="margin-top:5px; margin-bottom:0;" ng-click="goToItemDetails(item)">{{item.itemnumber}}</a>
                        <span ng-if="isOrderEntryCustomer" class="large-icon" favorite-icons></span>
                      </div>
                      <h5 class="block-display">
                        <span ng-if="item.brand_extended_description && !item.marketing_brand"><a ng-if="$state.params.catalogType == 'UNFI'" ui-sref="menu.catalog.products.brand({type:'search', catalogType: 'UNFI', id: item.brand_extended_description })"><a ng-if="$state.params.catalogType == 'BEK'" ui-sref="menu.catalog.products.brand({type:'brand', catalogType: 'BEK', id: item.brand_extended_description })">
                          {{item.brand_extended_description}}</a>
                        </span>
                        <span ng-if="!item.brand_extended_description && !item.marketing_brand">{{item.brand}}</span>
                        <span ng-if="item.marketing_brand">{{item.marketing_brand}}</span>
                      </h5>
                      <h3 class="block-display">
                        <a ng-click="goToItemDetails(item)" ng-if="!item.marketing_name">{{item.name}} </a>
                        <a ng-click="goToItemDetails(item)" ng-if="item.marketing_name">{{item.marketing_name}} </a>
                        <span class="nowrap small-icon" item-icons></span>
                      </h3>
                    </div>
                    <h5>
                      Manufacturer: <span ng-if="!item.marketing_manufacturer">{{item.manufacturer_name}}</span><span ng-if="item.marketing_manufacturer">{{item.marketing_manufacturer}}</span>
                    </h5>
                    <h5>
                      {{item.packsize}}
                    </h5>
                    <h6>
                      <span ng-if="item.description && !item.marketing_description">{{item.description}}</span>
                      <span ng-if="item.marketing_description">{{item.marketing_description}}</span>
                    </h6>
                    <h6 class="input-col" ng-if="canSeePrices">
                      <ng-form name="eachForm" ng-if="hasPackagePrice(item)">
                        Each: <input type="checkbox" ng-model="item.each" id="each" name="each" />
                        <label for="each"></label>
                      </ng-form>
                    </h6>
                    <h5 ng-if="canSeePrices">
                      <span ng-if="hasCasePrice(item)">{{(item.each ? item.packageprice : item.caseprice) | currency}} <span ng-if="item.caseonly">/ case</span></span>
                      <span class="text-small" tooltip="Catch weight pricing" ng-if="item.catchweight">LB</span>
                    </h5>
                    <h6 ng-if="canSeePrices">
                      <span ng-if="hasPrice(item.unitprice)">Portion Cost: {{item.unitprice | currency}}</span>
                    </h6>
                    <span>
                      <div ng-if="(canManageLists || canCreateOrders || canSubmitOrders) && canOrderItem(item)" class="hidden-print">
                        <div class="context-menu-template btn-primary btn btn-sm" context-menu context-menu-template>
                          Add To...
                          <span class="icon-arrow-down6"></span>
                        </div>
                        <form name="orderForm" class="inline-block-display">
                          <div counter allowDropdown="true" size="small" ng-model="item.quantity" min="0"></div>
                          <span ng-if="packagePriceInd">Order By Package
                            <ng-form name="eachForm_mobile">
                              <input type="checkbox" ng-model="item.each" id="each" name="each" />
                            </ng-form>
                          </span>
                        </form>
                      </div>
                    </span>
                  </div>
                </div>
                <div class="pull-right-lg pull-right-md pull-right-sm pull-left-xs search-result-image-container" ng-show="item.productimages.length > 0">
                  <a ng-click="openExternalLink(item.productimages[0].url)">
                    <img class="search-result-images" ng-src="{{item.productimages[0].url}}" alt=""/>
                  </a>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </div>
    </div>
    <div>
      <pagination
        ng-show="totalProducts > itemsPerPage"
        total-items="totalProducts"
        ng-model="currentPage"
        items-per-page="itemsPerPage"
        max-size="10"
        boundary-links="true"
        rotate="false"
        ng-click="blockUIAndChangePage(this);"
        class="pagination">
      </pagination>
    </div>
  </div>

    <!-- Standard Search Results View without Images -->
  <div ng-if="defaultSearchView == 'ViewWithoutImages'" ng-show="products.length !== 0" class="col-md-9 col-xs-12">
    <div>
      <pagination
        ng-show="totalProducts > itemsPerPage"
        total-items="totalProducts"
        ng-model="currentPage"
        items-per-page="itemsPerPage"
        max-size="10"
        boundary-links="true"
        rotate="false"
        ng-click="blockUIAndChangePage(this);"
        class="pagination search-results-pagination">
      </pagination>
    </div>
    <div class="row" ng-show="products.length !== 0">
      <div class="col-sm-12 col-xs-12">
        <div class="pull-left input-group hidden-md hidden-lg padding-right-15">
          <div class="search-result-sort-buttons">
            <span class="margin-right-5">Sort: </span>
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{selectedSortParameter}}<span class="caret margin-left-5"></span></button>
                <ul class="dropdown-menu">
                  <li ng-repeat="sortParameter in sortParameters" >
                    <a ng-click="selectSortParameter(sortParameter.name, sortParameter.value)">{{sortParameter.name}}</a>
                  </li>
                </ul>
            </div>
          </div>
        </div>
        <h2 class="pull-left hidden-sm hidden-xs" >Search Results</h2>
        <span class="pull-right margin-top-25">{{rangeStart - rangeStartOffset}} - {{rangeEnd}} of {{totalProducts}} Items</span>
      </div>
    </div>
    <table class="table tr-fast-repeat table-border table-products" context-menu favorite-item-click-handlers >
      <thead>
        <tr fsm-sticky-header scroll-body="'.table-products'" scroll-stop="0" scroll-offset="184">
          <th ng-if="isOrderEntryCustomer"></th>
          <th class="sort-col-header" style="min-width:60px;">
            Item #
          </th>
          <th class="sort-col-header">
            <span>Name</span>
          </th>
          <th class="sort-col-header hidden-mobile-visible-print">
            <span>Brand</span>
          </th>
          <th class="hidden-mobile-visible-print">
            Pack/Size
          </th>
          <th class="hidden-mobile-visible-print"></th>
          <th class="sort-col-header hidden-mobile-visible-print" ng-if="canSeePrices">
            <span>Each</span>
          </th>
          <th class="hidden-mobile-visible-print" ng-if="canSeePrices" ng-class="{'sort-col-header': totalItems <= maxSortCount}">
            <span>Portion Cost</span>
          </th>
          <th ng-if="canSeePrices" ng-class="{'sort-col-header': totalItems <= maxSortCount}">
            <span>Price</span>
          </th>
          <th></th>
        </tr>
      </thead>
      <tbody class="highlightRows" fast-repeat="item in products">
        <tr>
          <td ng-if="isOrderEntryCustomer" class="icon-col">
            <span class="large-icon" favorite-icons></span>
          </td>
          <td>
            <a ng-click="goToItemDetails(item)">{{item.itemnumber}}</a>
          </td>
          <td>
            {{item.name}}
          </td>
          <td class="hidden-mobile-visible-print">
            {{item.brand_extended_description}}
          </td>
          <td class="hidden-mobile-visible-print">
            {{item.packsize}}
          </td>
          <td class="nowrap hidden-mobile-visible-print text-right" item-icons>
          </td>
          <td class="input-col hidden-mobile-visible-print" ng-if="canSeePrices">
            <ng-form name="eachForm" ng-if="hasPackagePrice(item)">
              <input type="checkbox" ng-model="item.each" id="each" name="each" />
              <label for="each"></label>
            </ng-form>
          </td>
          <td class="hidden-mobile-visible-print" ng-if="canSeePrices">
            <span ng-if="hasPrice(item.unitprice)">{{item.unitprice | currency}}</span>
          </td>
          <td ng-if="canSeePrices">
            <span ng-if="hasCasePrice(item)">{{(item.each ? item.packageprice : item.caseprice) | currency}}</span>
            <span class="text-small" tooltip="Catch weight pricing" ng-if="item.catchweight">LB</span>
          </td>
          <td class="large-icon">
            <div class="hand-pointer pull-right addPaddingRight-10-sm" style="float:right !important;">
              <span context-menu-template ng-if="(canManageLists || canCreateOrders || canSubmitOrders) && canOrderItem(item)" class="context-menu-template context-menu__in-list hidden-print"><a class="icon-plus2" style="padding-right:10px;"></a></span>
              <span ng-click="showDetails = !showDetails;" class="hidden-print text-light visible-xs-inline visible-sm-inline icon-ellipsis"></span>
            </div>
          </td>
        </tr>
        <tr ng-if="showDetails" class="mobile-details-row">
          <td colspan="5">
            <table>
              <colgroup>
                <col width="25%" />
                <col width="75%" />
              </colgroup>
              <tbody>
                <tr>
                  <td>Pack/Size</td>
                  <td>{{::item.pack | number}} / {{::item.size}}</td>
                </tr>
                <tr>
                  <td>Brand</td>
                  <td>{{::item.brand_extended_description}}</td>
                </tr>
                <tr>
                  <td colspan="2" item-icons></td>
                </tr>
                <tr ng-show="canSeePrices" ng-if="hasPrice(item.unitprice)">
                  <td>Portion Cost</td>
                  <td>{{item.unitprice | currency}}</td>
                </tr>
                <tr ng-if="hasPackagePrice(item)">
                  <td>Each</td>
                  <td>
                    <ng-form name="eachForm_mobile">
                      <input type="checkbox" ng-model="item.each" id="each" name="each" />
                    </ng-form>
                  </td>
                </tr>
              </tbody>
            </table>
          </td>
        </tr>
      </tbody>
    </table>
    <div>
      <pagination
        ng-show="totalProducts > itemsPerPage"
        total-items="totalProducts"
        ng-model="currentPage"
        items-per-page="itemsPerPage"
        max-size="10"
        boundary-links="true"
        rotate="false"
        ng-click="blockUIAndChangePage(this);"
        class="pagination">
      </pagination>
    </div>
  </div>

  <div class="col-sm-5 no-results" ng-if="!searchMessage && products.length === 0 && !loadingResults">
    <p colspan="9">No products found. Please try another search.</p>
  </div>

  <div class="text-red" ng-show="searchMessage">{{searchMessage}}</div>

</div>
