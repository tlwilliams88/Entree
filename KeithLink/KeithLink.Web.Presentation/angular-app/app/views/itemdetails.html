<div page-header-bar>
  <div header-message>
    Item Details
  </div>
  <div header-buttons>
      <button class="btn btn-icon btn-default" ng-click="print()"><span class="icon-printer"></span></button>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-md-8">
    <div ng-show="item.productimages.length > 0" class="pull-left item-details__main-image">
      <img ng-src="{{item.productimages[0].url}}" alt=""/>
    </div>
    <div class="item-details__main-info pull-left">
      <h3 class="item-name">
        <span favorite-item-click-handlers favorite-icons></span>
        {{item.name}}
        <span class="item-details__icons" item-icons="item"></span>
      </h3>
      <div>
        <div ng-if="item.description" class="main-info__description">
          <strong>Description:</strong> {{item.description}}
        </div>
        <div>
          <span><strong>Item #</strong> {{item.itemnumber}} | </span>
          <span ng-if="item.caseprice !== '$0.00' && item.caseprice"><strong>Case:</strong> {{item.caseprice}} |</span>
          <span ng-if="item.packageprice !== '$0.00' && item.packageprice"><strong>Package:</strong> {{item.packageprice}} |</span>
          <span ng-if="item.pack !== null"><strong>Pack/Size:</strong> {{item.pack|number}}/{{item.size}}</span>
        </div>
        <div>
          <span ng-if="item.brand_extended_description !== null"><strong>Brand:</strong> {{item.brand_extended_description}}</span>
        </div>
        <div>
          <span ng-if="item.upc !== null && item.upc !== ''"><strong>UPC Vendor:</strong> {{item.upc}}</span>
        </div>
      </div>
      <div ng-if="canOrderProduct(item)" class="hidden-print sub-content">
        <a class="btn-primary btn btn-lg" ng-click="openContextMenu($event, item)" ng-mouseleave="displayedItems.isContextMenuDisplayed = false">Add To... <span class="icon-arrow-down6"></span><div context-menu></div></a>
        <div counter size="large" ng-model="item.quantity" min="0"></div>
      </div>
   </div>
  </div>
  <div class="col-xs-12 col-md-4">
    <h4 class="no-margin-top">Item Notes
      <a ng-click="openNotesModal(item)"><span class="icon-pencil large-icon"></span></a>
    </h4>
    <p>{{item.notes || 'None'}}</p>
    <!-- <button class="btn btn-primary" ng-click="openNotesModal(item)"><span class="icon-pencil"></span> Edit Notes</button> -->
  </div>
</div>

<div class="row sub-content">
  <div class="col-lg-12">
    <tabset class="tabset">
      <tab heading="Item Specifications">
        <h3 class="visible-print-block hidden-xs hidden-sm hidden-md hidden-lg">Item Specifications</h3>
          <table class="table table-striped-rows no-margin">
            <colgroup>
              <col style="width: 25%">
              <col style="width: 75%">
            </colgroup>
            <tbody>
              <tr>
                <th>Specification</th>
                <th>Details</th>
              </tr>
              <tr class="odd">
                <td>Item #</td>
                <td>{{item.itemnumber}}</td>
              </tr>
              <tr class="event">
                <td>GTIN</td>
                <td>{{item.upc}}</td>
              </tr>
              <tr class="odd">
                <td>Servings / Case</td>
                <td>{{item.gs1.servingsperpack}}</td>
              </tr>
              <tr class="event">
                <td>Portion Cost</td>
                <td>{{item.packageprice}}</td>
              </tr>
              <tr class="odd">
                <td>Portion Size</td>
                <td>{{item.gs1.servingsize}} {{item.gs1.servingsizeuom}}</td>
              </tr>
              <!-- Always null
              <tr>
                <td>Portion Size</td>
                <td>{{item.gs1.servingsuggestion}}</td>
              </tr> -->
              <tr class="event">
                <td>Previous Orders</td>
                <td></td>
              </tr>
              <tr class="odd">
                <td>Manufacturer</td>
                <td>{{item.manufacturer_name}}</td>
              </tr>
              <tr class="event">
                <td>Manufacturer Brand</td>
                <td>{{item.manufacturer_brand}}</td>
              </tr>
              <tr class="odd">
                <td>Vendor</td>
                <td>{{item.vendor_num}}</td>
              </tr>
              <tr class="event">
                <td>Vendor Item #</td>
                <td>{{item.manufacturer_number}}</td>
              </tr>
              <tr class="odd">
                <td>Category</td>
                <td>{{item.categoryname}}</td>
              </tr>
              <tr class="event">
                <td>Class</td>
                <td>{{item.iclass}}</td>
              </tr>
              <tr class="odd">
                <td>Storage Instructions</td>
                <td>{{item.gs1.storagetemp}}</td>
              </tr>
              <tr class="event">
                <td>Gross Wt</td>
                <td>{{item.gs1.grossweight}}</td>
              </tr>
              <tr class="odd">
                <td>Case Cube</td>
                <td>{{item.icube}}</td>
              </tr>
            </tbody>
          </table>
      </tab>
      <tab heading="Dietary Specifications">
        <h3 class="visible-print-block hidden-xs hidden-sm hidden-md hidden-lg">Dietary Specifications</h3>
          <table class="table table-striped-rows no-margin">
            <colgroup>
              <col style="width: 15%">
              <col style="width: 85%">
            </colgroup>
            <tbody>
              <tr class="event">
                <td><strong>Diet Types</strong></td>
                <td ng-if="item.gs1.diet" class="text-capitalize">
                  <span ng-repeat-start="diet in item.gs1.diet">{{diet.diettype}}</span>
                  <span ng-repeat-end ng-if="!$last">, </span>
                </td>
                <td ng-if="!item.gs1.diet.length > 0">Not Tested</td>
              </tr>
              <tr class="odd">
                <td><strong>Contains</strong></td>
                <td ng-if="item.gs1.allergens.contains.length > 0">{{item.gs1.allergens.contains.join(', ')}}</td>
                <td ng-if="!item.gs1.allergens.contains.length > 0">Not Tested</td>
              </tr>
              <tr class="event">
                <td><strong>May Contain</strong></td>
                <td ng-if="item.gs1.allergens.maycontain.length > 0">{{item.gs1.allergens.maycontain.join(', ')}}</td>
                <td ng-if="!item.gs1.allergens.maycontain.length > 0">Not Tested</td>
              </tr>
              <tr class="odd">
                <td><strong>Free From</strong></td>
                <td ng-if="item.gs1.allergens.freefrom.length > 0">{{item.gs1.allergens.freefrom.join(', ')}}</td>
                <td ng-if="!item.gs1.allergens.freefrom.length > 0">Not Tested</td>
              </tr>
              <tr class="event">
                <td><strong>Ingredients</strong></td>
                <td>{{item.gs1.ingredients}}</td>
              </tr>
            </tbody>
          </table>
      </tab>
      <tab heading="Nutrition">
        <h3 class="visible-print-block hidden-xs hidden-sm hidden-md hidden-lg">Nutrition</h3>
          <table class="table table-striped-rows no-margin">
            <colgroup>
              <col style="width: 20%">
              <col style="width: 20%">
              <col style="width: 20%">
              <col style="width: 20%">
              <col style="width: 20%">
            </colgroup>
            <tbody>
              <tr class="even">
                <th>Nutrient Type</th>
                <th>Nutrient Type Code</th>
                <th>Daily Value</th>
                <th>Measurement Type ID</th>
                <th>Measurement Value</th>
              </tr>
              <tr ng-repeat="nutrition in item.gs1.nutrition" ng-class="{ even : $odd, odd: $even }">
                <td>{{nutrition.nutrienttype}}</td>
                <td>{{nutrition.nutrienttypecode}}</td>
                <td>{{nutrition.dailyvalue}}</td>
                <td>{{nutrition.measurementtypeid}}</td>
                <td>{{nutrition.measurementvalue}}</td>
              </tr>
              <tr class="odd" ng-if="!item.gs1.nutrition || item.gs1.nutrition.length === 0"><td colspan="5">Not Tested</td></tr>
            </tbody>
          </table>
      </tab>
      <tab heading="Images" ng-show="item.productimages.length > 0">
        <div class="hidden-print item-details__images">
            <a ng-href="{{image.url}}" target="_blank" ng-repeat="image in item.productimages">
                <img ng-src="{{image.url}}" alt="" style="height:200px;" border="0"/>
            </a>
            <br />
        </div>
      </tab>
    </tabset>
  </div>
</div>