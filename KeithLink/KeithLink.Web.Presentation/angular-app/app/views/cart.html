<div page-header-bar>
  <div header-message>
    <div ng-hide="currentCart.isRenaming">
      <span>{{currentCart.name}}</span>
      <div style="display:inline-block;" ng-show="currentCart">
        <a ng-click="startEditCartName(currentCart.name)"><span class="hidden-print large-icon text-light icon-pencil"></span></a>
        <a confirmed-click="deleteCart(currentCart.id)" class="hidden-print" ng-confirm-click="This will delete the cart {{currentCart.name}} and all items within. Are you sure you want to delete this cart?"><span class="large-icon text-light icon-trash"></span></a>
      </div>
    </div>

    <form name="renameCartForm" class="style-validation-errors inline-header-form" ng-show="currentCart.isRenaming">
      <input check-duplicate-field="name" collection="carts" type="text" focus-me="currentCart.isRenaming" required ng-model="editCart.name" name="cartName" id="cartName" />
      <button ng-disabled="renamecartForm.$invalid" class="btn-no-style" type="submit" ng-click="renameCart(currentCart.id, editCart.name)"><span class="large-icon text-green icon-checkmark"></span></button>
      <a ng-click="currentCart.isRenaming = false"><span class="large-icon text-red icon-cross"></span></a>
      <span class="form-error-message" ng-show="renameCartForm.cartName.$error.required">Cart name is required</span>
      <span class="form-error-message" ng-show="renameCartForm.cartName.$error.checkDuplicateField">Duplicate cart name</span>
    </form>
  </div>
  <div header-buttons>
    <button class="btn btn-icon" ng-click="print()"><span class="icon-printer"></span></button>
    <button class="btn btn-icon"><span class="icon-export"></span></button>
    <button class="btn cta-btn" ng-disabled="cartForm.$invalid && cartForm.$dirty" ng-click="saveCart(currentCart)">Save Cart</button>
    <button class="btn cta-btn">Place Order</button>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    
    <div class="text-right">
    {{currentCart.items.length}} Items in Cart
    </div>

    <div class="row">
      <div class="col-xs-4">
        <div class="select-div">
          <select name="" id="" ng-options="cart.name for cart in carts" ng-model="currentCart"></select>
        </div>
      </div>
      <div class="col-xs-4">
        Active Cart
      </div>
      <div class="col-xs-4">
        <span class="text-light">Select a ship date</span>
        <span>July 31, 2014</span>
      </div>
    </div>
    
    <div class="bootstrap-table cart__table sub-content">
      <div class="row table-header">
        <div class="col-xs-12">
          <div class="row table-row table-row-data">
            <div class="col-md-1 col-xs-2 hand nowrap" ng-click="sortCart=!sortCart;sortList('itemnumber',sortCart)">
              Item #
              <span sort-icons field="'itemnumber'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-2 hidden-xs hidden-sm hand nowrap" ng-click="sortCart=!sortCart;sortList('notes',sortCart)">
              Notes
              <span sort-icons field="'notes'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-1 hidden-xs hidden-sm">
              Pack/Size
            </div>
            <div class="col-md-1 hidden-xs hidden-sm hand nowrap" ng-click="sortCart=!sortCart;sortList('brand',sortCart)">
              Brand
              <span sort-icons field="'brand'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-2 col-xs-6 hand nowrap" ng-click="sortCart=!sortCart;sortList('name',sortCart)">
              Name
              <span sort-icons field="'name'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-1 hidden-xs hidden-sm">
              
            </div>
            <div class="col-md-1 col-xs-2 hand nowrap" ng-click="sortCart=!sortCart;sortList('qty',sortCart)">
              Qty
              <span sort-icons field="'qty'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-1 hidden-xs hidden-sm hand nowrap" ng-click="sortCart=!sortCart;sortList('each',sortCart)">
              Each
              <span sort-icons field="'each'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-1 hidden-xs hidden-sm hand nowrap" ng-click="sortCart=!sortCart;sortList('itemnumber',sortCart)">
              Price
              <span sort-icons field="'price'" sortcart="sortCart" sortby="sortBy"></span>
            </div>
            <div class="col-md-1 hidden-xs hidden-sm hand nowrap">
              Ext Price
            </div>

          </div>
        </div>
      </div>

      <div class="table-body row" ng-hide="(currentCart.items.length === 0 || !currentCart.items) && currentCart" infinite-scroll="infiniteScrollLoadMore()" infinite-scroll-distance="2">
        <div class="col-xs-12">
          <form novalidate name="cartForm" class="style-validation-errors">
          <div 
            class="row table-row"  
            ng-class="{ odd : $odd, even: $even }" 
            ng-repeat="item in (filteredItems = (currentCart.items)) track by item.cartitemid"
           >
            <div class="col-xs-12">
              <div class="row table-row-data">
                <div class="col-md-1 col-xs-2">
                  <a ui-sref="menu.catalog.products.details({ itemNumber : item.itemnumber })">{{item.itemnumber}}</a>
                </div>
                <div class="col-md-2 table-col-input hidden-xs hidden-sm">
                  <ng-form class="hidden-print" name="notesForm">
                    <input id="notes" name="notes" type="text" ng-model="item.editNotes" />
                  </ng-form>
                </div>
                <div class="col-md-1 hidden-sm hidden-xs">
                  {{item.packsize}}
                </div>
                <div class="col-md-1 hidden-sm hidden-xs">
                  {{item.brand}}
                </div>
                <div class="col-md-2 col-xs-6">
                  {{item.name}}
                </div>
                <div class="col-md-1 hidden-sm hidden-xs" item-icons>
                </div>
                <div class="col-md-1 table-col-input col-xs-2">
                  <ng-form class="hidden-print" name="quantityForm">
                    <div class="select-div hidden-print">
                      <select name="" id="" ng-model="item.editQuantity" ng-options="qty for qty in [1,2,3,4,5,6,7,8,9,10]">
                        <option value=""></option>
                      </select>
                    </div>
                  </ng-form>
                  {{item.quantity}}
                </div>
                <div class="col-md-1 hidden-sm hidden-xs">
                  <ng-form name="eachForm">
                    <div class="checkboxFive">
                      <input type="checkbox" value="1" id="checkboxFiveInput" name="" />
                      <label for="checkboxFiveInput"></label>
                    </div>
                  </ng-form>
                </div>
                <div class="col-md-1 hidden-sm hidden-xs">
                  {{item.caseprice}}
                  {{item.packageprice}}
                </div>
                <div class="col-md-1 hidden-sm hidden-xs">
                  {{item.extprice}}
                </div>
                <div class="col-xs-1 visible-xs-inline visible-sm-inline">
                  <a><span class="hidden-print text-light visible-xs-inline visible-sm-inline icon-ellipsis" ng-click="showDetails = !showDetails;"></span></a>
                </div>
                
              </div>

              <!-- Mobile Details -->
              <div class="row" ng-show="showDetails">
                <div class="col-xs-12">
                  <p>Pack/Size: {{item.packsize}}</p>
                  <p>Brand: {{item.brand}}</p>
                  <p item-icons></p>
                  <p>
                    <!-- <div class="checkbox"> -->
                      <label for="each">Each</label>
                      <input type="checkbox" value="" name="each" id="each">
                    <!-- </div> -->
                  </p>
                  <p>Price: {{item.price}}</p>
                  <p>Ext Price: {{item.extprice}}</p>
                </div>  
              </div>
            </div>
          </div>
          </form>
        </div>
      </div>

      <div class="row table-footer">
        <div class="col-xs-12">
          <div class="row table-row table-row-data" ng-show="(selectedList.items.length === 0 || !selectedList.items) && selectedList">
            <div class="col-xs-12">
              There are no products in this list.
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center sub-content" loading-spinner="loadingResults"></div>
  </div>
</div>