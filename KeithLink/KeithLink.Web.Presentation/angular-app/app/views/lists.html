<div page-header-bar fsm-sticky-header scroll-body="'.custom-lists__table'" scroll-stop="0" style="z-index: 1000;" media-query="min-width: 1024px">
  <div header-message style="border-bottom: 0px !important; width: 100%; display: inline-flex;" class="padding-bottom-10">
      <button
        ng-if="!isCustomInventoryList"
        type="submit"
        class="btn btn-primary page-subheader-bar__button hidden-xs hidden-sm"
        style="border-radius: 4px;"
        ng-disabled="listForm.$invalid || selectedList.isworksheet || !selectedList.permissions.canEditList"
        ng-click="saveList(selectedList)">
        <span class="icon-floppy-disk padding-right-8"></span> Save List
      </button>
      <button
        ng-if="isCustomInventoryList"
        type="submit"
        class="btn btn-primary hidden-xs hidden-sm"
        style="border-radius: 4px;"
        ng-disabled="listForm.$invalid"
        ng-click="saveCustomInventoryList(selectedList.items)">
        <span class="icon-floppy-disk padding-right-8"></span> Save List
      </button>
      <div class="padding-right-8" style="text-align: center;" ng-class="{'width-87Percent' : selectedList.listid == 'nonbeklist' , 'width-100Percent' : selectedList.listid !== 'nonbeklist'}">
         <div class="btn-group list-name" dropdown is-open="status.listactions">
            <a class="btn btn-lg btn-default dropdown-toggle" 
               style="width: 250px; text-align: left;"
               ng-if="selectedList.isRenaming == false;">
                {{selectedList.name}} <span class="caret text-dark pull-right margin-top-firefox margin-top-7"></span>
            </a>
            <ul class="dropdown-menu" style="max-height: 300px; overflow: auto; width: 100%;">
                <li> 
                    <a ng-click="goToList('nonbeklist', '13')" ng-if="(selectedList.listid != 'nonbeklist')" ng-class="{'inactive-option': selectedList.listid == 'nonbeklist'}">
                        Non-BEK Items
                    </a>
                </li>
                <li ng-repeat="list in lists">
                    <a ng-click="goToList(list.listid, list.type)" 
                       ng-class="{'inactive-option': selectedList.listid == list.listid}">
                        {{list.name}}
                    </a>
                </li>
            </ul>
            <form name="renameListForm" class="style-validation-errors inline-header-form nowrap padding-right-8" ng-if="selectedList.isRenaming" style="text-align: center;" ng-class="{'width-87Percent' : selectedList.listid == 'nonbeklist' , 'width-100Percent' : selectedList.listid !== 'nonbeklist'}">
              <input
                no-duplicates="name"
                collection="lists"
                type="text"
                focus-me="selectedList.isRenaming"
                required
                ng-model-options="{ debounce: 1000 }" ng-model="selectedList.name"
                name="listName"
                id="listName"
                class="input-lg form-control" />

              <button
                ng-disabled="renameListForm.$invalid"
                class="btn-no-style"
                type="submit"
                ng-click="renameList(selectedList.listid, selectedList.name); renameListForm.$setPristine();">
                <span class="large-icon text-green icon-checkmark"></span>
              </button>

              <a ng-click="cancelRenameList()"><span class="large-icon text-red icon-cross"></span></a>

              <span class="form-error-message" ng-if="renameListForm.listName.$error.required">List name is required</span>
              <span class="form-error-message" ng-if="renameListForm.listName.$error.noDuplicates">Duplicate list name</span>
            </form>
        </div>
      <span ng-if="!isCustomInventoryList">
        <div class="inline-block-display">
          <span ng-if="selectedList.issharing" class="large-icon icon-user-add" tooltip="You are sharing this list."></span>
          <span ng-if="selectedList.isshared" class="large-icon icon-users" tooltip="This list is shared with you."></span>
        </div>

        <div
          class="inline-block-display"
          ng-if="selectedList && selectedList.permissions.canDeleteList || selectedList.permissions.canRenameList">

          <a
            ng-if="selectedList.permissions.canRenameList && selectedList.isRenaming == false"
            ng-click="selectedList.isRenaming = true">
            <span class="hidden-print large-icon text-light icon-pencil"></span>
          </a>
        </div>
        
        <button 
            type="button"
            class="btn btn-primary page-subheader-bar__button"
            ng-if="!isCustomInventoryList && selectedList.permissions.canReorderItems && selectedList.items.length > 0" 
            ui-sref="menu.organizelist({listId: selectedList.listid, listType: selectedList.type})">
            Organize this list
        </button>

        <button
          type="button"
          class="btn btn-primary page-subheader-bar__button"
          ng-click="createList()">
          Create New List
        </button>
        
        <button
          type="button"
          class="btn btn-primary page-subheader-bar__button"
          ng-if="isInternalAccountAdminUser && !hideMandatoryListCreateButton"
          ng-click="createMandatoryList()">
          Create Mandatory List
        </button>
        
        <button
          type="button"
          class="btn btn-primary page-subheader-bar__button"
          ng-if="isInternalAccountAdminUser && !hideRecommendedListCreateButton"
          ng-click="createRecommendedList()">
          Create Recommended List
        </button>
        
        <button
          ng-if="selectedList.permissions.canDeleteList"
          confirmed-click="deleteList(selectedList)"
          class="hidden-print btn btn-danger"
          ng-confirm-click="{{'This will delete the list ' + selectedList.name + ' and all items within. Are you sure you want to delete this list?'}}">
          <span class="icon-trash padding-right-8"></span> Delete List
        </button>
      </span>

    </div>

    <div class="pull-right hidden-xs hidden-sm" style="display: inline-flex;">

      <button title="Print" class="btn btn-default btn-icon" ng-click="openPrintOptionsModal(selectedList)" ng-if="!isCustomInventoryList">
        <span class="icon-printer"></span>
      </button>
      <button title="Export" class="btn btn-default btn-icon" ng-click="openExportModal()" ng-if="!isCustomInventoryList">
        <span class="icon-export"></span>
      </button>
      <button title="Import" class="btn btn-default btn-icon" ng-click="openListImportModal()" ng-if="!isCustomInventoryList">
        <span class="icon-install"></span>
      </button>
      <button title="Copy" class="btn btn-default btn-icon" ng-click="copyList(selectedList)" ng-if="!isCustomInventoryList">
        <span class="icon-copy"></span>
      </button>

    </div>
  </div>
  <div class="hidden-xs hidden-sm hidden-md" style="text-align: center; padding-top: 10px;" ng-if="isCustomInventoryList">
    <span>Enter non-Ben E. Keith items here if you'd like to include them in your Inventory report</span>
  </div>


<!-- Mobile subheader bar -->
<div class="visible-xs visible-sm hidden-print row page-subheader-bar" style="border-top: 1px solid #c3bc9c;">

  <button
    ng-if="selectedList.permissions.canEditList && !isCustomInventoryList"
    type="submit"
    class="btn-no-style page-subheader-bar__button button-left"
    ng-disabled="listForm.$invalid"
    ng-click="saveList(selectedList)">
    Save
  </button>

  <button
    ng-if="selectedList.permissions.canEditList && isCustomInventoryList"
    type="submit"
    class="btn-no-style page-subheader-bar__button button-left"
    ng-disabled="listForm.$invalid"
    ng-click="saveCustomInventoryList(selectedList)">
    Save
  </button>

  <button
    ng-if="selectedList.permissions.canEditList"
    class="btn-no-style page-subheader-bar__button button-left"
    ng-click="undoChanges()"
    type="button"
    ng-disabled="listForm.$pristine">
    Cancel
  </button>

  <div class="btn-group pull-right" dropdown is-open="status.listsisopen">
    <a type="button" class="dropdown-toggle btn-no-style page-subheader-bar__button button-right text-regular" style="padding-top: 5px;">Lists <span class="icon-arrow-down5"></span></a>
    <ul class="dropdown-menu dropdown-menu-scroll" role="menu">
      <li ng-repeat="list in lists | sortLists track by list.listid + '.' + list.name + '.' + list.type" ng-if="(list.listid !== selectedList.listid)">
        <a ng-click="goToList(list.listid, list.type)">
          {{list.name}}
        </a>
      </li>
      <li> <a ng-click="goToList('nonbeklist', '13')" ng-if="(selectedList.listid != 'nonbeklist')" ng-class="{'inactive-option': selectedList.listid == 'nonbeklist'}">Non-BEK Items</a></li>
      <li><a ng-click="createList()">Create a List...</a></li>

      <li ng-if="isInternalAccountAdminUser && !hideMandatoryListCreateButton"><a ng-click="createMandatoryList()">Create Mandatory List...</a></li>
      <li ng-if="isInternalAccountAdminUser && !hideRecommendedListCreateButton"><a ng-click="createRecommendedList()">Create Recommended List...</a></li>

    </ul>
  </div>
</div>
</div>
<div class="page-content">
  <div>

    <!-- Items in List -->
    <div class="padding-top-sm padding-top-xs col-xs-12" style="padding-left: 0;">

      <div class="hidden-print">
        <p class="text-red" ng-if="listForm.$invalid && listForm.$dirty" >List has some errors. Please fix these before saving.</p>
      </div>

      <form name="listSearchForm" class="hidden-print">
        <div class="col-xs-12" style="z-index: 998;">
            <div class="input-group input-group-lg">
              <input 
              type="text" 
              class="form-control"
              ng-model="listSearchTerm"
              placeholder="Search List by keyword, item # or label" 
              aria-label="Search List..."
              style="font-size: 14px;">
              <span class="input-group-btn">
                  <button type="submit" ng-click="filterItems(listSearchTerm)" class="btn btn-default"><span class="icon-search"></span></button>
                  <button type="button"  ng-click="clearFilter(true)" class="btn btn-default"><span class="glyphicon glyphicon-remove"></span></button>
              </span>
            </div>
        </div>
      </form>

  <div style="text-align: center; background-color: #fff;" fsm-sticky-header scroll-body="'.custom-lists__table'" scroll-stop="55" scroll-offset="20" media-query="min-width: 1024px">
   <pagination
    total-items="selectedList.itemCount"
    ng-model="currentPage"
    items-per-page="pagingPageSize"
    max-size="10"
    boundary-links="true"
    rotate="false"
    ng-change="blockUIAndChangePage(this)"
    class="pagination">
   </pagination>
  </div>

  <div class="row" ng-class="{ 'sub-content' : selectedList.itemCount < pagingPageSize }" style="left: 19px;">
    <div list-management-elements fsm-sticky-header scroll-body="'.custom-lists__table'" scroll-stop="125" scroll-offset="100" media-query="min-width: 1024px" style="background-color: #fff; z-index: 996;">
        <div class="col-xs-12" style="display: table;">
            <div>
                <div class="btn-group" style="display: inline-flex; padding-left: 10px; padding-bottom: 10px;">
                    <!-- Add to List -->
                    <div  dropdown is-open="multiSelect.showLists">
                      <button type="button" class="multi-action-btn dropdown-toggle btn btn-primary" ng-disabled="(selectedList.items | filter:{isSelected:'true'}).length == 0">
                        Add To List
                        <span class="icon-arrow-down6 text-dark"></span>
                      </button>
                      <ul class="dropdown-menu" role="menu" style="max-height: 250px; overflow-y: auto; left: 15px;">
                        <li
                          ng-click="addItemsToList(list)"
                          ng-repeat="list in lists | sortLists track by list.listid + '.' + list.name + '.' + list.type"
                          ng-if="(list.permissions.canAddItems && selectedList.listid !== list.listid && !list.permissions.specialDisplay)"
                          ng-hide="!list.permissions.canAddNonBEKItems && isCustomInventoryList">
                          <a href="">{{list.name}}</a>
                        </li>
                        <li ng-click="createListFromMultiSelect()"><a>Create New List...</a></li>
                      </ul>
                    </div>
                    <div class="row" ng-if="selectedList.is_contract_list" style="display: flex; margin-left: 10px;">
                        <div class="btn-group padding-right-5" dropdown is-open="status.sortParams">
                          <a class="btn btn-md btn-default dropdown-toggle">
                            {{selectedFilterParameter}} <span class="caret text-dark"></span>
                          </a>
                          <ul class=dropdown-menu>
                            <li ng-repeat="filterParameter in availableFilterParameters">
                              <a ng-click="selectFilterParameter(filterParameter)">{{filterParameter.name}}</a>
                            </li>
                          </ul>
                        </div>
                        <button class="btn btn-sm btn-danger padding-left-5" ng-click="clearFilter(false)">Clear Filter</button>
                    </div>
                    <!-- Edit Labels -->
                    <div class="hidden-xs" dropdown is-open="multiSelect.showLabels" ng-if="selectedList.permissions.canEditLabels" ng-hide="multiSelect.addingNewLabel">
                      <button type="button" class="multi-action-btn dropdown-toggle btn" style="margin-left: 8px; color: #fff; background-color: #17a2b8; border-color: #17a2b8;">
                        Add Label
                        <span class="icon-arrow-down6 text-light"></span>
                      </button>
                      <ul class="dropdown-menu" role="menu" style="max-height: 250px; overflow-y: auto; left: 143px;">
                        <li ng-repeat="label in labels track by label" ng-click="addLabels(label)"><a>{{label}}</a></li>
                        <li ng-click="multiSelect.addingNewLabel=true; multiSelect.showLabels=false;"><a>Add New Label...</a></li>
                      </ul>
                    </div>
                    <div ng-if="multiSelect.addingNewLabel" style="margin-left: 8px; display: inline-flex;">
                      <input
                        type="text"
                        class="form-control"
                        ng-model="multiSelect.newLabel"
                        focus-me="multiSelect.addingNewLabel"
                        placeholder="Add New Label..." />
                      <button
                        type="button"
                        class="btn btn-primary"
                        ng-if="multiSelect.addingNewLabel"
                        ng-disabled="!multiSelect.newLabel"
                        ng-click="applyNewLabel(multiSelect.newLabel)">
                        Apply
                      </button>
                      <button
                        type="button"
                        class="btn btn-danger"
                        ng-if="multiSelect.addingNewLabel"
                        ng-click="multiSelect.addingNewLabel=false;">
                        Cancel
                      </button>
                    </div>
                    <!-- Delete items -->
                    <button
                      type="button"
                      class="multi-action-btn btn btn-danger"
                      ng-click="deleteMultipleItems(selectedList)"
                      ng-if="selectedList.permissions.canDeleteItems"
                      ng-hide="multiSelect.addingNewLabel"
                      style="margin-left: 8px; border-radius: 4px;">
                      Delete Item
                    </button>
                    <span class="input-group hidden-xs hidden-sm" style="width: 50%; padding-left: 8px;">
                        <input 
                            type="text" 
                            class="form-control" 
                            placeholder="Enter Item Number..." 
                            aria-label="Enter Item..."
                            integer
                            allowleadingzeroes='true'
                            ng-show="selectedList.permissions.canAddItems"
                            ng-model="listItemNumber">
                        <span class="input-group-btn">
                            <button 
                                type="submit"
                                class="btn btn-primary hidden-sm hidden-xs"
                                ng-show="selectedList.permissions.canAddItems"
                                ng-disabled="!listItemNumber"
                                ng-click="addItemByItemNumber(listItemNumber)">
                                Add Item
                            </button>
                        </span>
                    </span>
                </div>

                <span class="pull-left" style="margin-top: 13px;">{{(selectedList.items|filter:{isSelected:'true', isdeleted:'false'}).length}} Items Selected</span>
                
                <div class="pull-right" style="margin-top: 15px;" ng-if="(selectedList.itemCount - itemCountOffset) > 0 && (rangeStart - rangeStartOffset) <= (rangeEnd - rangeEndOffset)">
                 Showing {{rangeStart - rangeStartOffset}} - {{rangeEnd}} of {{selectedList.itemCount - itemCountOffset}} Items
                </div>
            </div>
        </div>
    </div>

    </div>

     <form
      unsaved-warning-form
      novalidate
      name="forms.listForm"
      class="style-validation-errors list-form"
      autocomplete="off"
      context-menu
      favorite-item-click-handlers>

        <table
          navigate-table="lists"
          class="custom-lists__table table table-border table-striped-rows">
          <thead ng-show="!isCustomInventoryList">
            <tr fsm-sticky-header scroll-body="'.custom-lists__table'" scroll-stop="165" scroll-offset="163" media-query="min-width: 1024px">
              <th class="nowrap input-col">
                <input class="hidden-print" type="checkbox" ng-model-options="{ debounce: 250 }" ng-model="selectedList.allSelected" ng-click="allSelected = true; changeAllSelectedItems(selectedList.allSelected)" id="selectAllCheckbox" no-dirty-check>
                <span class="sort-col-header" ng-click="sortList('position',sort[0].order)">
                  #
                  <span sort-icons field="'position'" sortorder="sort[0].order" sortby="sort[0].field"></span>
                </span>
              </th>
              <th class="sort-col-header" ng-click="sortList('itemnumber',sort[0].order)">
                <span>Item <span sort-icons field="'itemnumber'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="sort-col-header" ng-click="sortList('name',sort[0].order)">
                <span>Name <span sort-icons field="'name'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print sort-col-header"  ng-click="sortList('brandextendeddescription',sort[0].order)">
                <span>Brand <span sort-icons field="'brandextendeddescription'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="sort-col-header drop-column" ng-click="sortList('itemclass',sort[0].order)">
                <span>Category <span sort-icons field="'itemclass'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="display-column drop-column-mobile"></th>
              <th ng-if="listHasCustomItems" class="sort-col-header drop-column" ng-click="sortList('supplier',sort[0].order)">
                <span>Supplier <span sort-icons field="'supplier'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print">
                Pack/Size
              </th>
              <th class="sort-col-header drop-column hidden-sm hidden-xs" ng-click="sortList('notes',sort[0].order)">
                <span>Notes <span sort-icons field="'notes'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print"></th>
              <th class="hidden-mobile-visible-print sort-col-header text-center" ng-if="selectedList.permissions.alternativeFieldHeader" ng-click="sortList(selectedList.permissions.alternativeFieldName,sort[0].order)">
                <span>{{selectedList.permissions.alternativeFieldHeader}}
                <span sort-icons field="selectedList.permissions.alternativeFieldName" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print sort-col-header" ng-if="selectedList.permissions.canSeeLabels" ng-click="sortList('label',sort[0].order)">
                <span>Label <span sort-icons field="'label'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              </th>
              <th class="hidden-mobile-visible-print">
                  Each
              </th>
              <th ng-if="canSeePrices" class="hidden-mobile-visible-print">
                  Price
              </th>
              <th class="hidden-mobile-visible-print sort-col-header" ng-if="selectedList.permissions.canSeeParlevel" ng-click="sortList('parlevel',sort[0].order)">
                <span>{{selectedList.permissions.alternativeParHeader || 'PAR'}}<span sort-icons field="'parlevel'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print sort-col-header" ng-if="selectedList.permissions.canSeeQtylevel" ng-click="sortList('quantity',sort[0].order)">
                <span>{{selectedList.permissions.alternativeParHeader || 'PAR'}}<span sort-icons field="'quantity'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>

              <th class="hidden-print"></th>
            </tr>
          </thead>

          <tbody
              ng-class="{ 'item-selected': item.isSelected, 'border-left-orange': item.custominventoryitemid, 'border-left-green': (item.delta == 'newly added active' || item.delta == 'active') && selectedList.is_contract_list, 'border-left-red': (item.delta == 'newly deleted' || item.delta == 'deleted') && selectedList.is_contract_list }"
              fast-repeat="item in selectedList.items.slice(startingPoint, endPoint) | filter:{listitemid: '!!', isdeleted:'!true'}"
              data-product="{{item}}"
              data-drag="dragEnabled"
              data-jqyoui-options="{
                helper:generateDragHelper,
                cursorAt: { top: -5, left: -5 },
                cancel: '.bek-no-drag',
                handle: '.bek-drag-handle',
                delay: 200}"
              jqyoui-draggable="{
                onStart: 'setIsDragging(true, item.listitemid)',
                onStop: 'setIsDragging(false)'}"
              id="listsTableRows"
              class="highlightRows"
              ng-click="shiftSelectOtherRows($event, item, $index);"
              ng-show="!isCustomInventoryList">

            <tr>
              <td class="hidden-drag" ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                <input type="checkbox" class="hidden-print bek-no-drag hand" ng-model-options="{ debounce: 1000 }" ng-model="item.isSelected" no-dirty-check>
                <span style="font-size:11px;">
                  {{item.position}}
                </span>
              </td>
              <td ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                <a
                  class="bek-no-drag"
                  ng-click="$event.stopPropagation()"
                  ng-if="item.isvalid && item.catalog_id && item.catalog_id.indexOf('unfi') == 0"
                  ui-sref="menu.catalog.products.details({ itemNumber : item.itemnumber, item: item, catalogType: 'UNFI' })">
                  {{item.itemnumber}}
                </a>
                <a
                  class="bek-no-drag"
                  ng-click="$event.stopPropagation()"
                  ng-if="item.isvalid && (!item.catalog_id || item.catalog_id.indexOf('unfi') != 0)"
                  ui-sref="menu.catalog.products.details({ itemNumber : item.itemnumber, item: item })">
                  {{item.itemnumber}}
                </a>
                <span
                  ng-if="!item.isvalid"
                  class="bek-no-drag"
                  ui-sref="menu.catalog.products.details({ itemNumber : item.itemnumber, item: item })"
                  tooltip="Please contact your DSR for more info.">
                  {{item.itemnumber}}
                </span>
              </td>
              <td ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                <span ng-if="item.isvalid">
                  {{item.name}}
                </span>
                <span ng-if="!item.isvalid">
                  Invalid item
                </span>
              </td>
              <td class="hidden-mobile-visible-print" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" >
                {{item.brand_extended_description}}
              </td>
              <td class="drop-column" ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                {{item.class}}
              </td>
              <td class="hidden-mobile-visible-print drop-column" ng-if="item.custominventoryitemid > -1" ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                {{item.supplier}}
              </td>
              <td class="hidden-mobile-visible-print" ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                {{item.packsize}}
              </td>
              <!-- Notes -->
              <td class="notes-col hidden-drag drop-column" ng-class="{'bek-drag-handle': !item.custominventoryitemid}">
                {{item.notes}}
              </td>
              <span class="hidden-sm hidden-xs" >
              <td ng-if="itemIconsActive" ng-click="$event.stopPropagation()" class="hidden-mobile-visible-print" item-icons></td>
              <td ng-if="!itemIconsActive" ng-click="$event.stopPropagation()" class="hidden-mobile-visible-print">
                <a ng-if="item.is_specialty_catalog === true"><span class="text-regular icon-leaf"></span></a>
                <a ng-if="item.inhistory === true"><span class="text-regular icon-history"></span></a>
                <a ng-if="item.notes"><span class="icon-docs text-regular"></span> </a>
                <a ng-if="item.replacementitem > 0"><span class="text-red icon-cycle"></span></a>
                <a ng-if="item.replaceditem > 0"><span class="text-green icon-cycle"></span></a>
                <a ng-if="item.substituteditemnumber"><span class="icon-switch text-regular"></span></a>
                <a ng-if="item.deviatedcost === 'Y'"><span class="text-regular icon-dollar"></span></a>
                <a ng-if="item.sellsheet === 'Y'"><span class="text-regular icon-sellsheet"></span></a>
                <a ng-if="item.childnutrition === 'Y'"><span class="text-regular icon-apple"></span></a>
                <a ng-if="item.nonstock === 'Y'"><span class="text-regular icon-user"></span></a>
                <a ng-if="item.temp_zone === 'F'"><span class="text-regular icon-snowflake"></span></a>
                <a ng-if="item.temp_zone === 'C'"><span class="text-regular icon-thermometer"></span></a>
                <a ng-if="item.temp_zone === 'D'"><span class="text-regular icon-air"></span></a>
              </td>
              <td id="{{item[selectedList.permissions.alternativeFieldName]}}" ng-if="selectedList.permissions.alternativeFieldName" class="hidden-xs hidden-sm text-center">
                {{item[selectedList.permissions.alternativeFieldName]}}
              </td>

              <td class="input-col nowrap hidden-sm hidden-xs hidden-drag" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" ng-click="$event.stopPropagation()" ng-if="selectedList.permissions.canSeeLabels && selectedList.permissions.canEditLabels && labelsActive">
                <div ng-hide="item.isEditing" class="bek-no-drag label-width right-margin-10">
                  <select name="" id="" ng-model="item.label" ng-options="label for label in labels track by label" class="label-width">
                    <option style="display:none"  value="">{{item.label || 'Select a label...'}}</option>
                  </select>
                  <a ng-click="item.isEditing = true; item.editLabel = item.label" class="large-icon hidden-print inline-icon"><span class="icon-plus3"></span></a>
                </div>

                <ng-form class="hidden-print bek-no-drag" name="addLabelForm" ng-if="item.isEditing">
                  <input
                    id="newLabel"
                    name="newLabel"
                    type="text"
                    class="edit-label bek-no-drag"
                    focus-me="item.isEditing"
                    placeholder="New Label..."
                    ng-required="item.isEditing"
                    ng-model="item.editLabel" />

                  <a ng-click="applyNewLabel(item.editLabel, item); saveList(selectedList);"><span class="large-icon text-green icon-checkmark"></span></a>
                  <a ng-click="item.isEditing = false; item.editLabel = ''"><span class="large-icon text-red icon-cross"></span></a>
                </ng-form>
              </td>

               <td ng-if="!labelsActive && selectedList.permissions.canSeeLabels && selectedList.permissions.canEditLabels" class="input-col nowrap hidden-sm hidden-xs hidden-drag" >
                 <div class="bek-no-drag label-width right-margin-10">
                   <select ng-if="item.label && item.label.length > 0" class="label-width">
                     <option style="display:none" value="">{{item.label}}</option>
                   </select>

                    <select ng-if="!item.label || item.label.length == 0"  class="label-width">
                     <option style="display:none" value=""> Select a label...</option>
                   </select>

                   <a class="large-icon hidden-print inline-icon"><span class="icon-plus3"></span></a>
                 </div>
               </td>

              <td class="input-col nowrap hidden-xs hidden-sm hidden-drag label-col" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" ng-click="$event.stopPropagation()" ng-if="(selectedList.permissions.canSeeLabels && !selectedList.permissions.canEditLabels)">
                {{item.label}}
              </td>
              <!-- Label for Print -->
              <td class="visible-print label-col" ng-if="(selectedList.permissions.canSeeLabels)">
                {{item.label}}
              </td>
              <td class="input-col hidden-mobile-visible-print max-width-20">
              <ng-form name="eachForm" ng-click="$event.stopPropagation()" ng-if="item.hasPackagePrice">
                <input type="checkbox" class="mousetrap" ng-checked = "!item.hasCasePrice || item.each" ng-disabled = "!item.hasCasePrice || selectedList.name == 'History'" ng-model="item.each" id="each" name="each"/>
                <label for="each"></label>
              </ng-form>
              </td>
              <td ng-if="(item.packageprice || item.caseprice) && canSeePrices" class="hidden-mobile-visible-print">
                {{item.each ? item.packageprice : item.caseprice | currency}}
                <span class="text-small" tooltip="Catch weight pricing" ng-if="item.catchweight">LB</span>
              </td>
              <!-- Parlevel -->
              <td class="input-col hidden-sm hidden-xs hidden-drag" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" ng-if="(selectedList.permissions.canSeeParlevel && selectedList.permissions.canEditParlevel)" ng-click="$event.stopPropagation()">
                <ng-form name="parlevelForm">
                   <input
                    id="defaultElement-{{currentIndex}}"
                    name="parlevel"
                    type="text"
                    numeric-validation
                    ng-model="item.parlevel"
                    class="text-right input-number bek-no-drag tabstop"
                    ng-keypress="parlevelChanged($event)"
                    onfocus="this.select()"/>
                </ng-form>
              </td>

              <td class="input-col hidden-sm hidden-xs hidden-drag" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" style="padding-top:12px;" ng-if="(selectedList.permissions.canSeeParlevel && !selectedList.permissions.canEditParlevel)">
                {{item.parlevel}}
              </td>
              <!-- Quantity -->
              <td class="input-col hidden-sm hidden-xs hidden-drag" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" ng-if="(selectedList.permissions.canSeeQtylevel && selectedList.permissions.canEditQtylevel)" ng-click="$event.stopPropagation()">
                <ng-form name="parlevelForm">
                   <input
                    id="defaultElement-{{currentIndex}}"
                    name="quantity"
                    type="text"
                    numeric-validation
                    ng-model="item.quantity"
                    class="text-right input-number bek-no-drag tabstop"
                    ng-keypress="parlevelChanged($event)"
                    onfocus="this.select()"/>
                </ng-form>
              </td>

              <td class="input-col hidden-sm hidden-xs hidden-drag" ng-class="{'bek-drag-handle': !item.custominventoryitemid}" style="padding-top:12px;" ng-if="(selectedList.permissions.canSeeQtylevel && !selectedList.permissions.canEditQtylevel)">
                {{item.quantity}}
              </td>
              <!-- Parlevel for Print -->
              <td class="visible-print hidden-drag" ng-if="(selectedList.permissions.canSeeParlevel)">
                {{item.parlevel}}
              </td>
              <!-- Quantity for Print -->
              <td class="visible-print hidden-drag" ng-if="(selectedList.permissions.canSeeQtylevel)">
                {{item.quantity}}
              </td>
              <td class="nowrap hidden-print large-icon icon-col hidden-drag" ng-click="$event.stopPropagation()">
                <div
                  id="optionsdropdown"
                  ng-if="!item.activeElement && item.isvalid"
                  class="context-menu__in-list hidden-print hidden-xs hidden-sm"
                  ng-mouseenter="item.activeElement = true"
                  ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}">
                  <a class="icon-arrow-down5"></a>
                </div>
                <div
                  id="optionsdropdown"
                  ng-if="!item.activeElement && item.isvalid"
                  class="context-menu__in-list hidden-print hidden-md hidden-lg"
                  ng-mouseenter="item.activeElement = true"
                  ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}">
                  <a class="icon-plus2"></a>
                </div>
                <div
                  id="optionsdropdown"
                  ng-if="item.activeElement && item.isvalid"
                  class="context-menu__in-list hidden-print hidden-xs hidden-sm"
                  ng-click="item.displayQuickAdd = !item.displayQuickAdd"
                  ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}"
                  ng-disabled="displayQuickAdd == false;">
                  <a ng-class="{'icon-arrow-up4' : item.displayQuickAdd, 'icon-arrow-down5' : !item.displayQuickAdd}"></a>
                </div>
                <div
                  id="optionsdropdown"
                  ng-if="item.activeElement && item.isvalid"
                  class="context-menu__in-list hidden-print hidden-md hidden-lg"
                  context-menu-template
                  ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}">
                  <a class="icon-plus2"></a>
                </div>
                <a class="bek-no-drag"><span class="text-light visible-xs-inline visible-sm-inline icon-ellipsis" ng-click="item.showDetails = !item.showDetails;"></span></a>
              </td>
            </tr>
            
            <tr class="hidden-xs hidden-sm" ng-if="item.displayQuickAdd == true" style="width: 100%;" ng-click="$event.stopPropagation()">
                <td colspan="14">
                    <table style="width: 100%;">
                        <tbody>
                            <tr>
                                <td style="text-align: center; width: 25%;">
                                    <button class="btn btn-primary btn-sm" ng-click="addItemToFavorites(item)" ng-disabled="item.favorite"><span class="icon-star2"></span> Add To Favorites </button>
                                </td>
                                <td style="padding-top: 18px; position: relative; width: 25%;">
                                    <form no-dirty-check>
                                        <div class="counter-container counter-container-sm" style="float:left; margin-right: 10px;">
                                            <input type="tel" class="input-number text-right" integer no-dirty-check ng-model="item.quantity" ng-init="item.quantity = 1" ng-if="item.nonstock !== 'Y' && (item.canOrder || canOrderItemInd) && canCreateOrders && !isCustomInventoryList"/>
                                        </div>
                                    </form>
                                    <div style="margin-top: -5px; height: 45px;">
                                        <select 
                                            ui-select2
                                            class="addToCart"
                                            ng-options="cart.name for cart in cartHeaders" 
                                            ng-model="cartHeaders.selectedCart" 
                                            style="width: 50%;" 
                                            data-placeholder="Add To Cart"
                                            ng-change="addItemToCart(cartHeaders.selectedCart.name, cartHeaders.selectedCart.id, item)"
                                            no-dirty-check
                                            ng-disabled="item.nonstock == 'Y' && (item.canOrder == false || canOrderItemInd == false) || isCustomInventoryList">
                                            <option value=""></option>
                                            <option value="one">Create Cart</option>
                                        </select>
                                    </div>
                                    <button class="btn btn-primary btn-sm" ng-click="createCartWithItem(item)" ng-if="item.nonstock !== 'Y' && (item.canOrder || canOrderItemInd) && canCreateOrders && !isCustomInventoryList"> Create New Cart </button>
                                </td>
                                <td style="padding-top: 18px; position: relative; width: 25%;">
                                    <div style="margin-top: -5px; height: 45px;">
                                        <select 
                                            ui-select2
                                            class="addToList"
                                            data-placeholder="Add To List"
                                            ng-options="list.name disable when (selectedList.name == list.name || list.permissions.canAddItems == false || list.permissions.specialDisplay == true) for list in quickAddLists | filter: sortLists" 
                                            ng-model="lists.selectedList" 
                                            style="width: 50%;"
                                            ng-change="addItemToList(lists.selectedList, item, selectedList)"
                                            no-dirty-check>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    <button class="btn btn-primary btn-sm" ng-click="createListWithItem(item)" > Create New List </button>
                                </td>
                                <td style="padding-top: 18px; position: relative; width: 25%;" ng-if="changeOrders.length > 0 && item.nonstock != 'Y' && (item.canOrder || canOrderItemInd) && !isCustomInventoryList">
                                    <div style="margin-top: -5px; height: 45px;">
                                        <select 
                                            ui-select2 
                                            ng-options="changeOrder.name for changeOrder in changeOrders | orderBy: ['name']" 
                                            ng-model="changeOrders.selectedChangeOrder" 
                                            style="width: 50%;" 
                                            data-placeholder="Add To Change Order"
                                            no-dirty-check>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>

            <tr ng-if="item.showDetails" class="mobile-details-row hidden-md hidden-lg" ng-class="{ odd : $odd, even: $even }">
              <td colspan="12">
                <table>
                  <colgroup>
                    <col width="25%" />
                    <col width="75%" />
                  </colgroup>
                  <tbody>
                    <tr >
                      <td>Notes</td>
                      <td class="notes-col">{{item.notes}}</td>
                    </tr>
                    <tr>
                      <td>Brand</td>
                      <td>{{item.brand_extended_description}}</td>
                    </tr>
                    <tr>
                      <td>Class</td>
                      <td>{{item.class}}</td>
                    </tr>
                    <tr ng-if="item.custominventoryitemid > -1">
                      <td>Supplier</td>
                      <td>{{item.supplier}}</td>
                    </tr>
                    <tr>
                      <td>Pack/Size</td>
                      <td>{{item.packsize}}</td>
                    </tr>
                    <tr>
                      <td item-icons></td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.alternativeFieldName)">
                      <td>{{selectedList.permissions.alternativeFieldHeader}}</td>
                      <td>{{item[selectedList.permissions.alternativeFieldName]}}</td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.alternativeFieldName2)">
                      <td>{{selectedList.permissions.alternativeFieldHeader2}}</td>
                      <td>{{item[selectedList.permissions.alternativeFieldName2]}}</td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.canSeeLabels)">
                      <td>Label</td>
                      <td ng-if="(selectedList.permissions.canEditLabels)">
                        <div ng-hide="item.isEditing" class="form-control-group__input">
                          <div class="select-div bek-no-drag hidden-print">
                            <select name="" id="" ng-model-options="{ debounce: 1000}" ng-model="item.label" ng-options="label for label in labels" style="max-width:170px;">
                              <option style="display:none"  value="">{{item.label || 'Select A Label '}}</option>
                            </select>
                          </div>
                          <a ng-click="item.isEditing = true; item.editLabel = item.label" class="large-icon hidden-print inline-icon"><span class="icon-plus3"></span></a>
                        </div>

                        <ng-form
                          class="hidden-print form-control-group__input"
                          name="addLabelForm_mobile"
                          ng-if="item.isEditing">

                          <input
                            type="text"
                            class="form-control edit-label bek-no-drag"
                            placeholder="New Label..."
                            ng-required="item.isEditing"
                            ng-model="item.editLabel" />

                          <a ng-click="applyNewLabel(item.editLabel, item); saveList(selectedList);"><span class="large-icon text-green icon-checkmark"></span></a>
                          <a ng-click="item.isEditing = false; item.editLabel = ''"><span class="large-icon text-red icon-cross"></span></a>
                        </ng-form>
                      </td>
                      <td class = "label-col" ng-if="(!selectedList.permissions.canEditLabels)">
                        {{item.label}}
                      </td>
                    </tr>
                    <tr ng-if="(item.hasPackagePrice && !selectedList.read_only)">
                    <td>Each</td>
                    <td>
                      <ng-form name="eachForm_mobile">
                        <input type="checkbox" ng-model="item.each" ng-checked = "!item.hasCasePrice || item.each" class="mousetrap" ng-disabled="(!item.hasCasePrice)" id="each" name="each" />
                      </ng-form>
                    </td>
                    </tr>
                    <tr ng-if="canSeePrices">
                      <td>Price</td>
                      <td>
                        {{item.each ? item.packageprice : item.caseprice | currency}}
                        <span class="text-small" tooltip="Catch weight pricing" ng-if="item.catchweight">LB</span>
                      </td>
                    </tr>
                    <tr ng-if="selectedList.permissions.canSeeParlevel">
                      <td>{{selectedList.permissions.alternativeParHeader || 'PAR'}}</td>
                      <td ng-if="(selectedList.permissions.canEditParlevel)">
                        <ng-form name="parlevelForm_mobile" class="form-control-group__input">
                          <span class="counter-container">
                            <button selection-model-ignore type="button" class="btn btn-warning icon-minus3 hidden-lg" ng-disabled = "item.parlevel === 0" ng-click="item.parlevel = item.parlevel - 1;"></button>
                              <input
                                id="parlevel"
                                name="parlevel"
                                type="text"
                                numeric-validation
                                ng-model="item.parlevel"
                                ng-blur="initParLvl(item)"
                                class="input-number input-number-mobile text-right bek-no-drag form-control"
                              />
                            <button selection-model-ignore type="button" class="btn btn-warning icon-plus3 hidden-lg" ng-click="item.parlevel = item.parlevel + 1;"></button>
                          </span>
                        </ng-form>
                      </td>
                      <td ng-if="(!selectedList.permissions.canEditParlevel)">
                        {{item.parlevel}}
                      </td>
                    </tr>
                    <tr ng-if="selectedList.permissions.canSeeQtylevel">
                      <td>{{selectedList.permissions.alternativeParHeader || 'PAR'}}</td>
                      <td ng-if="(selectedList.permissions.canEditQtylevel)">
                        <ng-form name="parlevelForm_mobile" class="form-control-group__input">
                          <span class="counter-container">
                            <button selection-model-ignore type="button" class="btn btn-warning icon-minus3 hidden-lg" ng-disabled = "item.quantity === 0" ng-click="item.quantity = item.quantity - 1;"></button>
                              <input
                                id="quantity"
                                name="quantity"
                                type="text"
                                numeric-validation
                                ng-model="item.quantity"
                                ng-blur="initParLvl(item)"
                                class="input-number input-number-mobile text-right bek-no-drag form-control"
                              />
                            <button selection-model-ignore type="button" class="btn btn-warning icon-plus3 hidden-lg" ng-click="item.quantity = item.quantity + 1;"></button>
                          </span>
                        </ng-form>
                      </td>
                      <td ng-if="(!selectedList.permissions.canEditQtylevel)">
                        {{item.quantity}}
                      </td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.canDeleteItems)">
                      <td colspan="2">
                        <button type="button" class="btn btn-lg btn-danger" ng-click="deleteItem(item)"><span class="icon-cross"></span> Remove Item</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>

          </tbody>

          <thead ng-show="isCustomInventoryList">
            <tr fsm-sticky-header scroll-body="'.custom-lists__table'" scroll-stop="0" scroll-offset="250">
              <th class="nowrap input-col">
                <input class="hidden-print" type="checkbox" ng-model-options="{ debounce: 250 }" ng-model="selectedList.allSelected" ng-click="allSelected = true; changeAllSelectedItems(selectedList.allSelected)" id="selectAllCheckbox" no-dirty-check>
<!--                 <span class="sort-col-header" ng-click="sortList('position',sort[0].order)">
                  #
                  <span sort-icons field="'position'" sortorder="sort[0].order" sortby="sort[0].field"></span>
                </span> -->
              </th>
              <th class="sort-col-header" ng-click="sortList('itemnumber',sort[0].order)">
                <span>Item <span sort-icons field="'itemnumber'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="sort-col-header" ng-click="sortList('name',sort[0].order)">
                <span>Name <span sort-icons field="'name'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print sort-col-header"  ng-click="sortList('brand',sort[0].order)">
                <span>Brand <span sort-icons field="'brand'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="sort-col-header drop-column" ng-click="sortList('supplier',sort[0].order)">
                <span>Supplier <span sort-icons field="'supplier'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print">
                <span >Pack</span>
              </th>
              <th class="hidden-mobile-visible-print" >
                Size
              </th>
              <th class="hidden-mobile-visible-print sort-col-header text-center" ng-if="selectedList.permissions.alternativeFieldHeader" ng-click="sortList(selectedList.permissions.alternativeFieldName,sort[0].order)">
                <span>{{selectedList.permissions.alternativeFieldHeader}}
                <span sort-icons field="selectedList.permissions.alternativeFieldName" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print sort-col-header text-center" ng-if="selectedList.permissions.alternativeFieldHeader2" ng-click="sortList(selectedList.permissions.alternativeFieldName2,sort[0].order)">
                <span>{{selectedList.permissions.alternativeFieldHeader2}}
                <span sort-icons field="selectedList.permissions.alternativeFieldName2" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              <th class="hidden-mobile-visible-print sort-col-header" ng-if="selectedList.permissions.canSeeLabels" ng-click="sortList('label',sort[0].order)">
                <span>Label <span sort-icons field="'label'" sortorder="sort[0].order" sortby="sort[0].field"></span></span>
              </th>
              </th>
              <th class="hidden-mobile-visible-print" ng-if="(!selectedList.read_only)">
                  Each
              </th>
              <th ng-if="canSeePrices" class="hidden-mobile-visible-print">
                  Price
              </th>

              <th class="hidden-print"></th>
            </tr>
          </thead>

          <tbody
              ng-class="{ 'item-selected': item.isSelected }"
              ng-repeat="item in selectedList.items"
              data-product="{{item}}"
              data-drag="dragEnabled"
              data-jqyoui-options="{
                helper:generateDragHelper,
                cursorAt: { top: -5, left: -5 },
                cancel: '.bek-no-drag',
                handle: '.bek-drag-handle',
                delay: 200}"
              jqyoui-draggable="{
                onStart: 'setIsDragging(true, item.listitemid)',
                onStop: 'setIsDragging(false)'}"
                id="listsTableRows"
                class="highlightRows"
                ng-click="shiftSelectOtherRows($event, item)"
                ng-if="isCustomInventoryList">

            <tr>
              <td class="hidden-drag">
                <input type="checkbox" class="hidden-print bek-no-drag hand" ng-model-options="{ debounce: 1000 }" ng-model="item.isSelected" style="margin-top:10px;" no-dirty-check>
<!--                 <span style="font-size:11px;">
                  {{item.id}}
                </span>    -->
              </td>
              <td >
                <span ng-click="$event.stopPropagation()">
                  <input class="tabstop form-control" type="text" ng-model="item.itemnumber" placeholder="Add Item Number" maxlength="15" no-duplicates="item.itemnumber" collection="selectedList" style="min-width: 90px;" required>
                </span>
              </td>
              <td >
                <span ng-click="$event.stopPropagation()">
                  <input class="tabstop form-control" type="text" ng-model="item.name" maxlength="30" style="min-width:60px">
                </span>
              </td>
              <td class="drop-column hidden-mobile-visible-print" >
                <span ng-click="$event.stopPropagation()">
                  <input class="tabstop form-control" type="text" ng-model="item.brand" maxlength="30" style="min-width:60px">
                </span>
              </td>
              <td class="drop-column" >
                <span ng-click="$event.stopPropagation()">
                  <input class="tabstop form-control" type="text" ng-model="item.supplier" class="form-control" style="min-width:70px">
                </span>
              </td>
              <td class="hidden-mobile-visible-print" >
                <span ng-click="$event.stopPropagation()">
                  <ng-form>
                    <input
                    id="defaultElement-{{currentIndex}}"
                    type="tel"
                    ng-model="item.pack"
                    class="text-right bek-no-drag tabstop form-control"
                    maxlength="4"
                    style="min-width:40px; max-width:60px;"
                    inputmode="numeric"
                    onkeypress="return event.charCode >= 48 && event.charCode <= 57"/>
                  </ng-form>
                </span>
              </td>
              <td class="hidden-mobile-visible-print" >
                <span ng-click="$event.stopPropagation()">
                  <ng-form name="itemSizeForm">
                    <input
                    id="defaultElement-{{currentIndex}}"
                    type="text"
                    ng-model="item.size"
                    class="text-right bek-no-drag tabstop form-control"
                    maxlength="8"
                    style="min-width:40px; max-width:60px;"
                    inputmode="text" />
                </ng-form>
                </span>
              </td>
              <td id="{{item[selectedList.permissions.alternativeFieldName]}}" ng-if="selectedList.permissions.alternativeFieldName" class="hidden-xs hidden-sm text-center">
                {{item[selectedList.permissions.alternativeFieldName]}}
              </td>
              <td id="{{item[selectedList.permissions.alternativeFieldName2]}}" ng-if="selectedList.permissions.alternativeFieldName2" class="hidden-xs hidden-sm text-center">
                {{item[selectedList.permissions.alternativeFieldName2]}}
              </td>
              <!-- Label -->
              <td class="input-col nowrap hidden-sm hidden-xs hidden-drag bek-drag-handle" ng-click="$event.stopPropagation()" ng-if="(selectedList.permissions.canSeeLabels && selectedList.permissions.canEditLabels)" style="vertical-align: middle;">
                <div ng-hide="item.isEditing" class="bek-no-drag label-width right-margin-10">
                  <select name="" id="label" ng-model="item.label" ng-options="label for label in labels track by label" class="label-width">
                    <option style="display:none"  value="">{{item.label || 'Select a label...'}}</option>
                  </select>
                  <a ng-click="item.isEditing = true; item.editLabel = item.label" class="large-icon hidden-print inline-icon"><span class="icon-plus3"></span></a>
                </div>

                <ng-form class="hidden-print bek-no-drag" name="addLabelForm" ng-if="item.isEditing">
                    <input
                        id="newLabel"
                        name="newLabel"
                        type="text"
                        class="edit-label bek-no-drag form-control"
                        focus-me="item.isEditing"
                        placeholder="New Label..."
                        ng-required="item.isEditing"
                        ng-model="item.editLabel" />
                    <a ng-click="applyNewLabel(item.editLabel, item); saveList(selectedList);"><span class="large-icon text-green icon-checkmark"></span></a>
                    <a ng-click="item.isEditing = false; item.editLabel = ''"><span class="large-icon text-red icon-cross"></span></a>
                </ng-form>
              </td>
              <td class="hidden-mobile-visible-print max-width-20" ng-if="!selectedList.read_only" style="vertical-align: middle;">
                <ng-form name="eachForm" ng-click="$event.stopPropagation()" ng-if="item.hasPackagePrice || isCustomInventoryList">
                  <input type="checkbox" class="mousetrap" ng-checked = "(!item.hasCasePrice && !isCustomInventoryList) || item.each" ng-disabled="!item.hasCasePrice && !isCustomInventoryList" ng-model="item.each" id="each" name="each"/>
                  <label for="each"></label>
                </ng-form>
              </td>
              <td class="hidden-mobile-visible-print" ng-click="$event.stopPropagation()" ng-if="isCustomInventoryList && item.each">
                <ng-form>
                  <input
                  id="packagePrice"
                  type="text"
                  numeric-validation
                  ng-model="item.packageprice"
                  class="text-right bek-no-drag tabstop form-control"
                  style="max-width:75px; min-width:60px;"
                  max-length="10"/>
                </ng-form>
              </td>
              <td class="hidden-mobile-visible-print" ng-if="isCustomInventoryList && !item.each">
                <span ng-click="$event.stopPropagation()">
                  <ng-form>
                    <input
                    id="casePrice"
                    type="text"
                    numeric-validation
                    ng-model="item.caseprice"
                    class="text-right bek-no-drag tabstop form-control"
                    max-length="10"
                    style="max-width:75px; min-width: 60px;"/>
                  </ng-form>
                </span>
              </td>
              <td class="nowrap hidden-print large-icon icon-col" ng-click="$event.stopPropagation()">
                  <div
                    id="optionsdropdown"
                    ng-if="!item.activeElement && isCustomInventoryList"
                    class="hidden-print hidden-xs hidden-sm inline-block-display"
                    ng-mouseenter="item.activeElement = true"
                    ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}">
                    <a class="icon-arrow-down5"></a>
                  </div>
                  <div
                    id="optionsdropdown"
                    ng-if="!item.activeElement && isCustomInventoryList"
                    class="context-menu__in-list hidden-print hidden-md hidden-lg inline-block-display"
                    ng-mouseenter="item.activeElement = true"
                    ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}">
                    <a class="icon-plus2"></a>
                  </div>
                  <div
                    id="optionsdropdown"
                    ng-if="item.activeElement && isCustomInventoryList"
                    class="hidden-print hidden-xs hidden-sm inline-block-display"
                    ng-click="item.displayQuickAdd = !item.displayQuickAdd"
                    ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}"
                    ng-disabled="displayQuickAdd == false;">
                    <a ng-class="{'icon-arrow-up4' : item.displayQuickAdd, 'icon-arrow-down5' : !item.displayQuickAdd}"></a>
                  </div>
                  <div
                    id="optionsdropdown"
                    ng-if="item.activeElement && isCustomInventoryList"
                    class="context-menu__in-list hidden-print hidden-md hidden-lg inline-block-display"
                    context-menu-template
                    ng-style="!(showRowOptionsDropdown) && {'visibility': 'hidden'}">
                    <a class="icon-plus2"></a>
                  </div>
                <a
                class="bek-no-drag hidden-xs hidden-sm margin-top-10">
                  <span
                  class="text-red icon-cross"
                  ng-click="deleteCustomInventoryItem(item, $index)">
                  </span>
                </a>
                <a
                class="bek-no-drag margin-top-10">
                  <span
                  class="text-light visible-xs-inline visible-sm-inline icon-ellipsis"
                  ng-click="item.showDetails = !item.showDetails;">
                  </span>
                </a>
              </td>
            </tr>
            <tr ng-if="item.displayQuickAdd == true" style="width: 100%;" ng-click="$event.stopPropagation()">
                <td colspan="14">
                    <table style="width: 100%;">
                        <tbody>
                            <tr>
                                <td style="padding-top: 18px; position: relative; width: 25%;">
                                    <div style="margin-top: -5px; height: 50px;">
                                        <select 
                                            ui-select2
                                            data-placeholder="Add To List"
                                            ng-options="list.name disable when (selectedList.name == list.name) for list in quickAddLists | filter: sortLists" 
                                            ng-model="lists.selectedList" 
                                            style="width: 50%;"
                                            ng-change="addItemToList(lists.selectedList, item, selectedList)"
                                            no-dirty-check>
                                            <option value=""></option>
                                        </select>
                                    </div>
                                    
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>

            <tr ng-if="item.showDetails" class="mobile-details-row hidden-md hidden-lg" ng-class="{ odd : $odd, even: $even }">
              <td colspan="10">
                <table>
                  <colgroup>
                    <col width="25%" />
                    <col width="75%" />
                  </colgroup>
                  <tbody>
                    <tr>
                      <td>Brand</td>
                      <td>
                        <span  ng-click="$event.stopPropagation()">
                          <input class="tabstop form-control" type="text" ng-model="item.brand_extended_description" maxlength="8" style="max-width:40%;">
                        </span>
                      </td>
                    </tr>
                    <tr>
                      <td>Supplier</td>
                      <td>
                        <span  ng-click="$event.stopPropagation()">
                          <input class="tabstop form-control" type="text" ng-model="item.supplier" maxlength="8" style="max-width:40%;">
                        </span>
                      </td>
                    </tr>
                    <tr>
                      <td >Pack</td>
                      <td >
                        <span ng-click="$event.stopPropagation()">
                          <ng-form>
                            <input class="tabstop form-control pull-left" type="number" ng-model="item.pack" maxlength="4" style="max-width:40%;">
                          </ng-form>
                        </span>
                      </td>
                    </tr>
                    <tr >
                      <td>Size</td>
                      <td ng-click="$event.stopPropagation()" style="width:60px;">
                        <ng-form>
                          <input class="tabstop form-control pull-left" type="text" ng-model="item.size" maxlength="8" style="max-width:40%;">
                        </ng-form>
                      </td>
                    <tr ng-if="(selectedList.permissions.alternativeFieldName)">
                      <td>{{selectedList.permissions.alternativeFieldHeader}}</td>
                      <td>{{item[selectedList.permissions.alternativeFieldName]}}</td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.alternativeFieldName2)">
                      <td>{{selectedList.permissions.alternativeFieldHeader2}}</td>
                      <td>{{item[selectedList.permissions.alternativeFieldName2]}}</td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.canSeeLabels)">
                      <td>Label</td>
                      <td ng-if="(selectedList.permissions.canEditLabels)">
                        <div ng-hide="item.isEditing" class="form-control-group__input">
                          <div class="select-div bek-no-drag hidden-print">
                            <select name="" id="" ng-model-options="{ debounce: 1000}" ng-model="item.label" ng-options="label for label in labels" style="max-width:170px;">
                              <option style="display:none"  value="">{{item.label || 'Select A Label '}}</option>
                            </select>
                          </div>
                          <a ng-click="item.isEditing = true; item.editLabel = item.label" class="large-icon hidden-print inline-icon"><span class="icon-plus3"></span></a>
                        </div>

                        <ng-form
                          class="hidden-print form-control-group__input"
                          name="addLabelForm_mobile"
                          ng-if="item.isEditing">

                            <input
                            type="text"
                            class="form-control edit-label bek-no-drag"
                            placeholder="New Label..."
                            ng-required="item.isEditing"
                            ng-model="item.editLabel" />
                            <a ng-click="applyNewLabel(item.editLabel, item); saveList(selectedList);"><span class="large-icon text-green icon-checkmark"></span></a>
                            <a ng-click="item.isEditing = false; item.editLabel = ''"><span class="large-icon text-red icon-cross"></span></a>
                        </ng-form>
                      </td>
                    </tr>
                    <tr ng-if="(item.hasPackagePrice && !selectedList.read_only)">
                    <td>Each</td>
                    <td>
                      <ng-form name="eachForm_mobile">
                        <input type="checkbox" ng-model="item.each" ng-checked = "!item.hasCasePrice || item.each" class="mousetrap" ng-disabled="(!item.hasCasePrice)" id="each" name="each" />
                      </ng-form>
                    </td>
                    </tr>
                    <tr ng-if="canSeePrices">
                      <td>Price</td>
                      <td>
                        <span  ng-click="$event.stopPropagation()">
                          <input id="packagePrice" class="tabstop form-control" ng-if="item.each" type="text" ng-model="item.packageprice" max-length="10" numeric-validation style="max-width:40%;">
                          <input id="casePrice" class="tabstop form-control" ng-if="!item.each" type="text" ng-model="item.caseprice"  max-length="10" numeric-validation style="max-width:40%;">
                        </span>
                      </td>
                    </tr>
                    <tr ng-if="(selectedList.permissions.canDeleteItems)">
                      <td colspan="2">
                        <button type="button" class="btn btn-lg btn-danger" ng-click="deleteCustomInventoryItem(item, $index)"><span class="icon-cross"></span> Remove Item</button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>

          </tbody>

          <tfoot ng-if="(selectedList.items.length) === 0 && !loadingResults">
            <tr>
              <td colspan="13">
                No products to display.
              </td>
            </tr>
          </tfoot>
        </table>
        <div
        class="text-right margin-bottom-10">
          <button
          type="button"
          class="btn btn-primary btn-lg pull-left-xs pull-left-sm pull-left-md pull-right-lg"
          ng-click="addNewItemToList()"
          ng-if="isCustomInventoryList">
          Add Item To List
          </button>
        </div>
      </form>


  <div ng-show="selectedList.itemCount > pagingPageSize" style="text-align: center;">
   <pagination
    total-items="selectedList.itemCount"
    ng-model="currentPage"
    items-per-page="pagingPageSize"
    max-size="10"
    boundary-links="true"
    rotate="false"
    ng-change="blockUIAndChangePage(this)"
    class="pagination">
   </pagination>
  </div>

    </div>
  </div>

  <a ng-if="isMobileDevice" class='back-to-top icon-arrow-up2 text-blue pull-right' ng-click='scrollToTop()' style='display: inline;'></a>
  <a type="submit"  ng-if="isMobileDevice && selectedList.permissions.canEditList && !isCustomInventoryList" class='floating-save-mobile icon-floppy-disk text-blue' ng-disabled="listForm.$invalid" ng-click='saveList(selectedList)'></a>
  <a type="submit"  ng-if="isMobileDevice && selectedList.permissions.canEditList && isCustomInventoryList" class='floating-save-mobile icon-floppy-disk text-blue' ng-disabled="listForm.$invalid" ng-click='saveCustomInventoryList(selectedList)'></a>

</div>
