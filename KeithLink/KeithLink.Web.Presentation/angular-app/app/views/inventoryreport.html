<div page-header-bar>
  <div header-message>
    Inventory Valuation Report
  </div>
  <div header-buttons>
    <a class="btn btn-icon btn-default" ng-click="print()" title="Print"><span class="icon-printer"></span></a>
    <!--<a title="Export" ng-click="openExportModal()" class="btn btn-default btn-icon"><span class="icon-export"></span></a>-->
  </div>
</div>

<div class="page-content">
  
  <a class="text-large btn-link" ui-sref="menu.reports"><span class="icon-arrow-left6"></span> Back</a>
  
  <div class="row sub-content">
    <form class="col-xs-8 form-inline" name="addItemByNumberForm">
      <div style="width:100%" class="form-group">
        <input type="text" placeholder="Item Number" ng-model="itemNumber" class="form-control input-lg">
        <button type="submit" class="btn btn-primary btn-lg" ng-click="addItemByItemNumber(itemNumber)">Add Item</button>
        
        <div class="pull-right btn-group hidden-print" dropdown is-open="status.listactions">
          <button type="button" class="btn btn-lg btn-default dropdown-toggle" ng-disabled="listsLoading">
            <div ng-if="!listsLoading">Add Items from List <span class="icon-arrow-down6"></span></div>
            <div class="text-red" ng-if="listsLoading">Loading Lists...
            </div>
          </button>
          <ul class="dropdown-menu" role="menu">
            <li ng-repeat="list in ::lists | sortLists">
              <a ng-click="addItemsFromList(list.listid)">{{::list.name}}</a>
            </li>
          </ul>
        </div>

      </div>
    </form>
    
    <form name="inventoryForm" class=" style-validation-errors col-md-8 col-lg-8">
      <div class="row sub-content">
        <div class="col-xs-7" style="margin-top: 10px;">
          Showing {{items.length}} Item<span ng-if="items.length !== 1">s</span>
        </div>
        <div class="text-green currency-value col-xs-5 text-right">
          {{subtotal | currency}}
        </div>
      </div>
      <table class="table table-border table-striped-rows" navigate-quick-add>
        <thead>
          <tr>
            <th>Item #</th>
            <th>Name</th>
            <th>Pack/Size</th>
            <th>Label</th>
            <th>Qty</th>
            <th>Each</th>
            <th>Price</th>
            <th>Ext. Price</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="item in items" ng-class="{ odd : $odd, even: $even }">
            <td>
              <a ui-sref="menu.catalog.products.details({itemNumber: item.itemnumber})">{{::item.itemnumber}}</a>
            </td>
            <td>{{::item.name}}</td>
            <td>{{::item.packsize}}</td>
            <td>{{::item.label}}</td>
            <td class="input-col">
              <input name="quantity" type="text" ng-model="item.quantity" class="input-number" integer>
            </td>
            <td class="input-col">
              <input ng-if="item.hasPackagePrice" name="each" type="checkbox" ng-model="item.each">
            </td>
            <td>
              {{(item.each ? item.packageprice : item.caseprice) | currency}}
            </td>
            <td>
              {{item.extprice | currency}}
            </td>
            <td>
              <a ng-click="removeRow(item)"><span class="large-icon text-red icon-cross"></span></a>
            </td>
          </tr>
        </tbody>
        <tfoot ng-show="items && items.length === 0">
          <tr>
            <td colspan="9">There are no items to display.</td>
          </tr>
        </tfoot>
      </table>
    </form>
    <div class="text-center" loading-spinner="loadingResults"></div>

  </div>
</div>
